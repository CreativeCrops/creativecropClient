Lyte.Component.register("crux-sharing-options",{_template:'<template tag-name="crux-sharing-options">\t<lyte-dropdown class="gBB mainDropdownSharingOptions" lt-prop-type="multiple" lt-prop-yield="true" lt-prop-tabindex="1" on-before-hide="{{method(\'mainDropdownBeforeHide\')}}" lt-prop-remove-multiple="true" on-show="{{method(\'mainDropdownOnShow\')}}" on-add="{{method(\'addToList\')}}" on-remove="{{method(\'removeFromList\')}}">\t\t<template is="registerYield" yield-name="yield">\t\t\t<lyte-drop-button class="outerbox">\t\t\t\t<template is="for" items="{{selectedItems}}" item="item" index="index">\t\t\t\t\t<span class="singleItem" data-value="{{item.prefix}}:{{item.id}}" id="{{item.id}}">{{item.prefix}}: {{item.name}}<lyte-drop-remove class="boxclose">x</lyte-drop-remove></span>\t\t\t\t</template>\t\t\t</lyte-drop-button>\t\t\t<lyte-drop-box>\t\t\t\t<div class="wrapperdiv">\t\t\t\t\t\t<lyte-dropdown style="width: auto; border-right: 1px solid #d6d6d6;" lt-prop-yield="true" lt-prop-search="true" lt-prop-tabindex="8" on-option-selected="{{method(&quot;innerDropdownOnOptionSelected&quot;)}}">\t\t\t\t\t\t\t<template is="registerYield" yield-name="yield">\t\t\t\t\t\t\t\t<lyte-drop-box class="parentscope">\t\t\t\t\t\t \t\t\t<lyte-drop-body>\t\t\t\t\t\t\t\t\t\t<template is="for" items="{{sharingOptions}}" item="item" index="index">\t\t\t\t\t\t\t\t\t\t\t<lyte-drop-item data-value="{{index}}"> {{item.name}} </lyte-drop-item>\t\t\t\t\t\t\t\t\t\t</template>\t\t\t\t\t\t\t\t\t</lyte-drop-body>\t\t\t\t\t\t\t\t</lyte-drop-box>\t\t\t\t\t\t\t</template>\t\t\t\t\t\t</lyte-dropdown>\t\t\t\t\t\t<lyte-input class="sharingSearchBox" lt-prop-value="{{lbind(cxPropInputValue)}}" style="width:auto" lt-prop-placeholder="Search"></lyte-input>\t\t\t\t</div>\t\t\t\t<lyte-drop-body class="sharinOptionsDropBody">\t\t\t\t\t<template is="for" items="{{sharingOptions}}" item="item" index="index">\t\t\t\t\t\t<crux-sharing-options-dropitem cx-prop-request="{{item.model_name}}" id="{{item.name}}" cx-prop-prefix="{{item.prefix}}" cx-prop-id-selector="{{item.idSelector}}" cx-prop-search-action="{{item.search_action}}" change-selected="{{method(\'changeSelected\')}}" cx-prop-name-selector="{{item.nameSelector}}" class="{{if(ifEquals(selectedOption,index),\'shown\',\'hiden\')}}" item-selected="{{method(\'itemSelected\')}}"></crux-sharing-options-dropitem>\t\t\t\t\t</template>\t\t\t\t</lyte-drop-body>\t\t\t</lyte-drop-box>\t\t</template>\t</lyte-dropdown></template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"text",position:[1,2]},{type:"componentDynamic",position:[1,4]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1,1]},{type:"registerYield",position:[3,1,1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3,1,1]},{type:"attr",position:[3,1,3]},{type:"componentDynamic",position:[3,1,3]},{type:"attr",position:[3,3,1]},{type:"for",position:[3,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3,3]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["sharingOptions","sharingArray","selectedOption","cxPropInputValue","selectedItems"],data:function(){return{sharingOptions:Lyte.attr("array"),sharingArray:Lyte.attr("array"),selectedOption:Lyte.attr("string",{default:"0"}),cxPropInputValue:Lyte.attr("string",{default:""}),selectedItems:Lyte.attr("array",{default:[]})}},init:function(){},didConnect:function(){this.getData("cxPropSelected")},actions:{},methods:{mainDropdownBeforeHide:function(t,e){var o=e.childComp.querySelector("div.wrapperdiv");if(t&&o.contains(t.target))return!1},mainDropdownOnShow:function(t,e){var o=e.childComp.querySelector("div.wrapperdiv").querySelector("lyte-dropdown");this.setData("selectedOption",o.ltProp("selected")),document.querySelector(".sharinOptionsDropBody").querySelector(".shown").component.getItems()},innerDropdownOnOptionSelected:function(t,e,o){this.setData("selectedOption",e),this.setData("cxPropInputValue",""),document.querySelector(".sharinOptionsDropBody").querySelector(".shown").component.getItems()},addToList:function(t,e){document.querySelector(".sharinOptionsDropBody");e=e.split(":");var o=t.target.innerText;Lyte.arrayUtils(this.getData("selectedItems"),"push",{name:o,id:e[1],prefix:e[0]})},removeFromList:function(t,e){for(var o=0;o<e.length;o++){e[o]=e[o].split(":");for(var i=0;i<this.getData("selectedItems").length;i++)this.getData("selectedItems")[i].id==e[o][1]&&Lyte.arrayUtils(this.getData("selectedItems"),"removeAt",i)}document.querySelector(".sharinOptionsDropBody").querySelector(".shown").component.removeNone()},changeSelected:function(){var t=document.querySelector(".mainDropdownSharingOptions"),e=t.ltProp("selected");t.ltProp("selected",'[""]'),t.ltProp("selected",e)}},getValue:function(){return JSON.parse($(".mainDropdownSharingOptions")[0].ltProp("selected")).join(",")},sendInputToChild:function(){document.querySelector(".sharinOptionsDropBody").querySelector(".shown").component.updateInputValue(this.getData("cxPropInputValue"))},changeInputValue:function(){this.sendInputToChild()}.observes("cxPropInputValue")});