Lyte.Component.register("crux-criteria-editor-view-header",{_template:'<template tag-name="crux-criteria-editor-view-header"><div class="header"><lyte-th style="opacity:1;">       \t\t\t\t<div class="patternNumDiv" style="height: auto; opacity: 1; overflow: visible;">       \t\t\t\t\t<template is="if" value="{{ifNotEquals(criteriaIndex,1)}}"><template case="true">\t\t       \t\t\t\t<div class="andOr" style="opacity: 1; height: auto;">\t\t       \t\t\t\t\t<lyte-input lt-prop-style="color:blue;cursor:pointer; transform:scale(0.75)" lt-prop-readonly="true" lt-prop-value="{{andOrCondition}}"></lyte-input>\t\t       \t\t\t\t</div>\t       \t\t\t\t</template></template>               \t\t\t<input type="hidden" id="match" value="">               \t\t\t<input type="text" id="patternNum" class="patterNum" value="{{criteriaIndex}}" readonly="">               \t\t</div>                </lyte-th>                <lyte-th>       \t\t\t <span class="colorSpan">{{field}}</span>              </lyte-th>                <lyte-th>       \t\t\t\t<span>{{captialize(condition)}}</span>                </lyte-th>                <lyte-th>            \t\t<span class="colorSpan">{{value}}</span>                 </lyte-th>                 <lyte-th>                 </lyte-th>                 </div></template>',_dynamicNodes:[{type:"attr",position:[0,0,1,1]},{type:"if",position:[0,0,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]}},default:{}},{type:"attr",position:[0,0,1,5]},{type:"componentDynamic",position:[0,0]},{type:"text",position:[0,2,1,0]},{type:"componentDynamic",position:[0,2]},{type:"text",position:[0,4,1,0]},{type:"componentDynamic",position:[0,4]},{type:"text",position:[0,6,1,0]},{type:"componentDynamic",position:[0,6]},{type:"componentDynamic",position:[0,8]}],_observedAttributes:["criteria","field","condition","value","andOrCondition","module","criteriaIndex","fields","selectedField","selectedCondition","pickList","selectUser","lookup","callModule","lookupField","tagComponent","layoutComponent"],data:function(){return{criteria:Lyte.attr("object"),field:Lyte.attr("string"),condition:Lyte.attr("string"),value:Lyte.attr("string"),andOrCondition:Lyte.attr("string"),module:Lyte.attr("string"),criteriaIndex:Lyte.attr("string"),fields:Lyte.attr("array"),selectedField:Lyte.attr("object"),selectedCondition:Lyte.attr("array"),pickList:Lyte.attr("boolean",{default:!1}),selectUser:Lyte.attr("boolean",{default:!1}),lookup:Lyte.attr("boolean",{default:!1}),callModule:Lyte.attr("boolean",{default:!1}),lookupField:Lyte.attr("boolean",{default:!1}),tagComponent:Lyte.attr("boolean",{default:!1}),layoutComponent:Lyte.attr("boolean",{default:!1})}},init:function(){this.getData("criteria")&&(this.initCruxConditions("criteria"),this.setViewCriteriaObj(this.getData("criteria")))},setViewCriteriaObj:function(t){var e,a,i=t.field,o=t.comparator,s=t.value;i=i.split("."),this.setData("selectUser",!1),this.setData("pickList",!1),this.setData("lookup",!1),this.setData("tagComponent",!1),this.setData("layoutComponent",!1),i=i[i.length-1];for(var n=this.getData("fields"),l=n.length,r=0;r<l;r++)if(n[r].api_name==i){this.setData("selectedField",n[r]),i=n[r].field_label,e=n[r].data_type;break}switch(e){case"none":select="none";break;case"text":case"email":case"phone":case"website":case"textarea":select="text";break;case"currency":case"double":case"integer":case"bigint":select="number";break;case"datetime":case"date":select="date";break;case"boolean":select="boolean";break;case"ownerlookup":select="default",this.setData("selectUser",!0);break;case"picklist":this.setData("pickList",!0),select="text",this.setData("selectedFieldPicklist",this.getData("selectedField").pick_list_values);break;case"lookup":select="text",this.setData("lookup",!0);var c=field.lookup.module.api_name;store.findRecord("module",moduleRecordMapping[c].id),this.setData("callModule",c),this.setData("lookupField",field.api_name)}if(i.match(/Tag/)&&(this.setData("tagComponent",!0),select="defWithEmpty",this.setData("showEmpty",!0)),i.match(/Layout/)&&(this.setData("layoutComponent",!0),select="default",this.setData("showEmpty",!0)),"string"==typeof s&&s.match(/AGE/g)){a=o;var p=this.ageInDaysConditions;for(r=0;r<p.length;r++)if(p[r].system==a){a=p[r].display;break}o=(s=a+" "+(s=s.replace(/\D/g,""))).match(/\+/g)?"Due in Days":"Age in Days"}var d=select+"Conditions";this.setData("selectedCondition",this[d]);var y=o;for(r=0;r<this.getData("selectedCondition").length;r++)if(o==this.getData("selectedCondition")[r].system){o=this.getData("selectedCondition")[r].display;break}if(y.match(/between/)&&(s=s[0]+","+s[1]),y.match(/empty/)&&(s="",this.setData("selectUser",!1),this.setData("pickList",!1),this.setData("lookup",!1),this.setData("tagComponent",!1),this.setData("layoutComponent",!1)),this.getData("pickList")&&(s=s.join(" ,")),this.getData("selectUser")&&store.findAll("user").then(function(){for(var t=store.peekRecord("user",s[0]).full_name,e=1;e<s.length;e++)t=","+store.peekRecord("user",s[e]).full_name;s=t}),this.getData("lookup")&&(s=s.join(",")),this.getData("tagComponent")){var u=store.peekAll("tag").filterBy({modRefId:s[0]})[0].name;for(r=1;r<s.length;r++)u=u+","+store.peekAll("tag").filterBy({modRefId:s[r]})[0].name}this.setData("field",i),this.setData("condition",o),this.setData("value",s)}},{mixins:["crux-criteria-conditions"]});