Lyte.Component.register("crux-user-lookup",{_template:'<template tag-name="crux-user-lookup"> <lyte-messagebox lt-prop-type="warning" lt-prop-message="You have reached the Maximum 500 - Users."></lyte-messagebox> <lyte-modal lt-prop-close-on-escape="true" class="lookupModal" lt-prop-max-height="60%" lt-prop-show-close-button="false" lt-prop-max-width="70%" lt-prop-width="{{cxPropModalWidth}}" lt-prop-transition="{&quot;animation&quot;:&quot;slideFromTop&quot;,&quot;duration&quot;:&quot;0.4&quot;}" lt-prop-wrapper-class="popUpWrapper userLookupModal {{if(ifEquals(cxPropType,\'view\'),\'cruxUserView\',\'\')}}" lt-prop-offset="{&quot;top&quot;:&quot;0px&quot;,&quot;left&quot;:&quot;center&quot;}" on-before-show="{{method(\'bodyBeforeShow\')}}" on-show="{{method(\'bodyShow\')}}" on-before-close="{{method(\'bodyBeforeClose\')}}" on-close="{{method(\'bodyClose\')}}">  <template is="registerYield" yield-name="modal">    <lyte-modal-header class="headerMinheight">      <template is="if" value="{{expHandlers(cxPropType,\'==\',\'view\')}}"><template case="true">      <div class="lookupHeaderStyle">      <span class="lookupHeaderText">{{cxPropHeaderName}}</span>      </div>      </template></template>      <template is="if" value="{{expHandlers(DselectedList,\'!\')}}"><template case="true">        <div class="displayFlex">        <template is="if" value="{{cxPropFilterable}}"><template case="true"><template is="if" value="{{expHandlers(cxPropFilterYield,\'!\')}}"><template case="true">                     <lyte-dropdown data-zcqa="user_lookup_type" class="innerDrop" lt-prop-callout="{{cxPropUserDropCallout}}" lt-prop-selected="{{cxPropSelectedFilterOption}}" lt-prop-options="{{cxPropFilterOptions}}" lt-prop-user-value="{{cxPropFilterUserValue}}" lt-prop-system-value="{{cxPropFilterSystemValue}}" lt-prop-show="{{cxPropUserDropShow}}" lt-prop-freeze="{{cxPropUserDropFreeze}}" lt-prop-disabled="{{cxPropUserDropDisabled}}" lt-prop-boundary="{{cxPropUserDropBoundary}}" on-option-selected="{{method(\'userSelected\')}}">          </lyte-dropdown>         </template><template case="false">          <lyte-dropdown data-zcqa="user_lookup_type" class="innerDrop" lt-prop-yield="true" lt-prop-selected="{{cxPropSelectedFilterOption}}" lt-prop-callout="{{cxPropUserDropCallout}}" lt-prop-show="{{cxPropUserDropShow}}" lt-prop-freeze="{{cxPropUserDropFreeze}}" lt-prop-tabindex="{{cxPropUserDropTabindex}}" lt-prop-disabled="{{cxPropUserDropDisabled}}" lt-prop-boundary="{{cxPropUserDropBoundary}}" on-option-selected="{{method(\'userSelected\')}}">           <template is="registerYield" yield-name="yield">            <lyte-yield yield-name="userDropdownInner"></lyte-yield>           </template>          </lyte-dropdown>         </template></template></template></template><template is="if" value="{{expHandlers(cxPropSearchable,\'&amp;&amp;\',userCount)}}"><template case="true">         <div class="lookupSearch vam">            <span data-zcqa="user_lookup_search_clear" class="{{if(cxPropInputValue,\'lookupSearchIcon lookupSearchCloseIcon\',\'lookupSearchIcon\')}}" onclick="{{action(\'clearInput\', if(cxPropInputValue,true,false))}}" style="{{if(searchingSearch,\'display:none\',\'display:inline-block\')}};"></span>            <lyte-input data-zcqa="user_lookup_search" lt-prop-autocomplete="{{cxPropInputAutocomplete}}" lt-prop-placeholder="{{cxPropInputPlaceholder}}" lt-prop-autofocus="{{cxPropInputAutofocus}}" lt-prop-disabled="{{cxPropInputDisabled}}" lt-prop-style="{{cxPropInputStyle}}" lt-prop-maxlength="{{cxPropInputMaxlength}}" lt-prop-readonly="{{cxPropInputReadonly}}" lt-prop-id="{{cxPropInputId}}" lt-prop-class="{{cxPropInputClass}}" lt-prop-type="{{cxPropInputType}}" lt-prop-name="{{cxPropInputName}}" lt-prop-width="{{cxPropInputWidth}}" lt-prop-value="{{lbind(cxPropInputValue)}}" lt-prop-appearance="{{cxPropInputAppearance}}" lt-prop-direction="{{cxPropInputDirection}}" lt-prop-tab-index="{{cxPropInputTabindex}}" onkeyup="{{action(\'searchKeyup\', event)}}" style="width: 100%;"> </lyte-input>            <img src="/crm/CRMClient/images/crux-search-loader.svg" style="{{if(searchingSearch,\'display:inline-block\',\'display:none\')}};" width="25" height="25" align="absmiddle" class="searchLoader">                      </div>        </template></template>        <template is="if" value="{{expHandlers(cxPropType,\'==\',\'multiple\')}}"><template case="true">         <span data-zcqa="user_lookup_selected" class="userSelection" onclick="{{action(\'SelectedUserModal\')}}">{{cruxGetI18n(\'crm.usrpop.non.selected\')}} ({{totalAddedObjects.length}})</span>         <div class="cB"></div>        </template><template case="false">          <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(cxPropType,\'!=\',\'view\'),\'&amp;&amp;\',expHandlers(cxPropFilterable,\'!\')),\'&amp;&amp;\',expHandlers(cxPropSearchable,\'!\')),\'&amp;&amp;\',expHandlers(cxPropType,\'==\',\'single\'))}}"><template case="true">            <span data-zcqa="user_lookup_close" class="userLookupCloseButton lyteModalClose noHeader" onclick="{{action(\'closeUserLookup\')}}"></span>            </template><template case="false">         <span data-zcqa="user_lookup_close" class="userLookupCloseButton lyteModalClose" onclick="{{action(\'closeUserLookup\')}}"></span>         </template></template>          </template></template>        </div>      </template><template case="false">        <span data-zcqa="user_lookup_back" class="userLookupBackIcon" onclick="{{action(\'bactToLookup\')}}"></span>        <span data-zcqa="user_lookup_selected" class="selectedUsersHd" onclick="{{action(\'SelectedUserModal\')}}">{{cruxGetI18n(\'crm.usrpop.non.selected\')}}</span>      </template></template>    </lyte-modal-header>    <lyte-modal-content class="lookupModalContent" onmouseenter="{{action(\'mouse\',event)}}">      <img src="/crm/CRMClient/images/crux-search-loader.svg" width="25" height="25" align="absmiddle" class="listSearchLoader" style="{{if(searchingUser,\'display:inline-block\',\'display:none\')}};">            <template is="if" value="{{expHandlers(DselectedList,\'!\')}}"><template case="true">         <lyte-table lt-prop-yield="true" onscroll="{{action(\'tableScroll\', event)}}" class="{{if(systemData.length,\'userLookupTable\',\'emptyUserLookupTable\')}}">          <template is="registerYield" yield-name="yield">           <lyte-table-structure>            <lyte-thead>             <lyte-tr>               <template is="if" value="{{expHandlers(cxPropType,\'==\',\'single\')}}"><template case="true">              <lyte-th class="lookupTableHeaderWidth"></lyte-th>              </template><template case="false"><template is="if" value="{{expHandlers(cxPropType,\'==\',\'multiple\')}}"><template case="true">                <lyte-th class="lookupTableHeaderWidth"><lyte-checkbox lt-prop-checked="false" lt-prop-name="allSelectCheckbox" lt-prop-type="primary" on-checked="{{method(\'allCheckboxChecked\')}}" on-unchecked="{{method(\'allCheckboxUnchecked\')}}"></lyte-checkbox></lyte-th>                </template></template></template></template>              <template is="for" items="{{cxPropDisplayTableHeader}}" item="feildName" index="position">                <lyte-th class="lookupTableHeaderColor {{if(ifEquals(cxPropType,\'view\'),\'lookupViewTablePadding\',\'\')}}">{{feildName}}</lyte-th>                </template>             </lyte-tr>            </lyte-thead>            <lyte-tbody id="userLookupTableBody">             <template is="if" value="{{expHandlers(cxPropType,\'==\',\'single\')}}"><template case="true"><template is="for" items="{{systemData}}" item="item" index="index">               <lyte-tr onclick="{{action(\'rowClick\',event,this)}}" data-zcqa="user_lookup_list_{{item.full_name}}">                <lyte-td><lyte-radiobutton class="radioLookupTableBodypadding" lt-prop-checked="{{if(item.selected,\'true\',\'false\')}}" on-before-checked="{{method(\'radiobuttonOnBeforeChecked\')}}" on-checked="{{method(\'radiobuttonChecked\')}}" lt-prop-name="radioButton" lt-prop-value="{{item}}" on-before-unchecked="{{method(\'radiobuttonBeforeUnChecked\')}}"></lyte-radiobutton></lyte-td>                  <template is="for" items="{{cxPropTableHeaders}}" item="feildName" index="position">                    <lyte-td class="lookupTableBodyColor">                      <template is="if" value="{{expHandlers(feildName,\'==\',\'full_name\')}}"><template case="true">                        <img src="{{contactServerUrl}}/file?ID={{item.zuid}}&amp;fs=thumb" class="userImg">                      </template></template>                        <span class="cruxUserLookupText {{if(ifEquals(feildName,\'full_name\'),\'cruxUserLookupImage\',\'\')}}">{{userFieldValues(item,feildName)}}</span>                        </lyte-td>                    </template>               </lyte-tr>              </template></template><template case="false"><template is="if" value="{{expHandlers(cxPropType,\'==\',\'multiple\')}}"><template case="true"><template is="for" items="{{systemData}}" item="item" index="index">               <lyte-tr onclick="{{action(\'rowClick\',event,this)}}" data-zcqa="user_lookup_list_{{item.full_name}}">                <lyte-td class="lookupTableBodypadding"><lyte-checkbox lt-prop-checked="{{if(item.selected,\'true\',\'false\')}}" lt-prop-value="{{item}}" lt-prop-name="checkbox" lt-prop-type="primary" on-checked="{{method(\'checkboxChecked\',index)}}" on-unchecked="{{method(\'checkboxUnchecked\',index)}}" on-before-checked="{{method(\'checkboxOnBeforeChecked\')}}" on-changed="{{method(\'checkboxOnChanged\')}}"></lyte-checkbox></lyte-td>                <template is="for" items="{{cxPropTableHeaders}}" item="value" index="position">                  <lyte-td class="lookupTableBodyColor">                    <template is="if" value="{{expHandlers(value,\'==\',\'full_name\')}}"><template case="true">                      <img src="{{contactServerUrl}}/file?ID={{item.zuid}}&amp;fs=thumb" class="userImg">                    </template></template>                      <span class="cruxUserLookupText {{if(ifEquals(value,\'full_name\'),\'cruxUserLookupImage\',\'\')}}">{{userFieldValues(item,value)}}</span>                      </lyte-td>                  </template>               </lyte-tr>              </template></template><template case="false"><template is="if" value="{{expHandlers(cxPropType,\'==\',\'view\')}}"><template case="true"><template is="for" items="{{systemData}}" item="item" index="index">               <lyte-tr class="viewLookupTr">                <template is="for" items="{{cxPropTableHeaders}}" item="value" index="position">                  <lyte-td class="lookupTableBodyColor lookupViewTablePadding">                    <template is="if" value="{{expHandlers(value,\'==\',\'full_name\')}}"><template case="true">                      <img src="{{contactServerUrl}}/file?ID={{item.zuid}}&amp;fs=thumb" class="userImg">                    </template></template>                      <span class="cruxUserLookupText {{if(ifEquals(value,\'full_name\'),\'cruxUserLookupImage\',\'\')}}">{{userFieldValues(item,value)}}</span>                      </lyte-td>                  </template>               </lyte-tr>              </template></template></template></template></template></template></template>            </lyte-tbody>           </lyte-table-structure>          </template>         </lyte-table>         <template is="if" value="{{expHandlers(expHandlers(systemData.length,\'==\',0),\'&amp;&amp;\',expHandlers(firstOpen,\'!\'))}}"><template case="true"><div class="NoUsersLookup">{{cruxGetI18n(\'crm.security.group.users.empty\')}}</div></template></template>                    </template><template case="false">         <lyte-table lt-prop-yield="true" onscroll="{{action(\'tableScroll\',event)}}" class="{{if(addedItems.length,\'userLookupTable\',\'emptyUserLookupTable\')}}">          <template is="registerYield" yield-name="yield">           <lyte-table-structure>            <lyte-thead>             <lyte-tr>                            <lyte-th class="lookupTableHeaderWidth"><lyte-checkbox lt-prop-checked="true" lt-prop-name="selectedAllSelectCheckbox" lt-prop-type="primary" on-checked="{{method(\'allCheckboxChecked\')}}" on-unchecked="{{method(\'allCheckboxUnchecked\')}}"></lyte-checkbox></lyte-th>              <template is="for" items="{{cxPropDisplayTableHeader}}" item="feildName" index="position">                <lyte-th class="lookupTableHeaderColor">{{feildName}}</lyte-th>                </template>             </lyte-tr>            </lyte-thead>            <lyte-tbody id="selectedUserLookupTableBody">             <template is="for" items="{{addedItems}}" item="item" index="index">              <lyte-tr onclick="{{action(\'rowClick\',event,this)}}" data-zcqa="user_lookup_list_{{item.full_name}}">               <lyte-td class="lookupTableBodypadding"><lyte-checkbox lt-prop-checked="{{if(item.selected,\'true\',\'false\')}}" lt-prop-value="{{item}}" lt-prop-name="checkbox" lt-prop-type="primary" on-checked="{{method(\'checkboxChecked\',index)}}" on-unchecked="{{method(\'checkboxUnchecked\',index)}}" on-before-checked="{{method(\'checkboxOnBeforeChecked\')}}"></lyte-checkbox></lyte-td>               <template is="for" items="{{cxPropTableHeaders}}" item="feildName" index="position">                 <lyte-td class="lookupTableBodyColor">                   <template is="if" value="{{expHandlers(feildName,\'==\',\'full_name\')}}"><template case="true">                     <img src="{{contactServerUrl}}/file?ID={{item.zuid}}&amp;fs=thumb" class="userImg">                   </template></template>                     <span class="cruxUserLookupText {{if(ifEquals(feildName,\'full_name\'),\'cruxUserLookupImage\',\'\')}}">{{userFieldValues(item,feildName)}}</span>                                          </lyte-td>                 </template>              </lyte-tr>             </template>            </lyte-tbody>           </lyte-table-structure>          </template>         </lyte-table>         <template is="if" value="{{expHandlers(addedItems.length,\'==\',0)}}"><template case="true"><div class="NoUsersLookup">{{cruxGetI18n(\'crm.security.group.users.empty\')}}</div></template></template>                      </template></template>    </lyte-modal-content>   <template is="if" value="{{expHandlers(cxPropType,\'==\',\'multiple\')}}"><template case="true">    <lyte-modal-footer>     <lyte-button lt-prop-disabled="true" lt-prop-appearance="primary" onclick="{{action(\'assignSelectedUsers\')}}" data-zcqa="user_lookup_assign">        \t    <template is="registerYield" yield-name="text"> \t\t   Assign \t    </template>     </lyte-button>     <lyte-button onclick="{{action(\'closeUserLookup\')}}" data-zcqa="user_lookup_cancel">\t    <template is="registerYield" yield-name="text">\t\t   Cancel\t    </template>     </lyte-button>    </lyte-modal-footer>   </template></template>  </template> </lyte-modal></template>',_dynamicNodes:[{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,2]},{type:"if",position:[1,2],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["''",{type:"helper",value:{name:"if",args:["searchingSearch","'display:none'","'display:inline-block'"]}},"';'"]}}}},{type:"attr",position:[1,3]},{type:"componentDynamic",position:[1,3]},{type:"attr",position:[1,5],attr:{style:{name:"style",helperInfo:{name:"concat",args:["''",{type:"helper",value:{name:"if",args:["searchingSearch","'display:inline-block'","'display:none'"]}},"';'"]}}}}]}},default:{}},{type:"attr",position:[1,4]},{type:"if",position:[1,4],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"text",position:[1,2]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"text",position:[3,0]}]}},default:{}},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[3,1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["''",{type:"helper",value:{name:"if",args:["searchingUser","'display:inline-block'","'display:none'"]}},"';'"]}}}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1,1]},{type:"if",position:[1,1,1,1],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"componentDynamic",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,1,3]},{type:"for",position:[1,1,1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3,1]},{type:"if",position:[1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,0]},{type:"componentDynamic",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,0]},{type:"componentDynamic",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"text",position:[0,0]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1,1,0]},{type:"componentDynamic",position:[1,1,1,1,0]},{type:"componentDynamic",position:[1,1,1,1]},{type:"attr",position:[1,1,1,3]},{type:"for",position:[1,1,1,3],dynamicNodes:[{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3,1]},{type:"for",position:[1,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,0]},{type:"componentDynamic",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"text",position:[0,0]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[3]},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"registerYield",position:[1,1,1],dynamicNodes:[]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"registerYield",position:[1,3,1],dynamicNodes:[]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[3]}],_observedAttributes:["firstOpen","cxPropModalWidth","cxPropShow","DselectedList","selectedList","cxPropDisplayTableHeader","cxPropTableHeaders","cxPropType","checkboxItems","selectingFlag","userModuleId","systemData","localData","pageNo","noMoreRecords","addedItems","totalAddedObjects","responseData","currentPos","isSearch","contactServerUrl","onModalClose","splitAddedItems","splitPreAddedItems","usersAvailable","savedFilter","backButton","multipleClicks","multiScroll","searchingSearch","searchingUser","makeRequest","cxPropCacheQuery","cxPropDataCache","cxPropPerPage","cxPropSelectedIds","cxPropSelectedId","cxPropExclude","cxPropSearchCount","cxPropModuleName","cxPropMaxLimit","beforeAssign","localClose","selectedUser","userCount","headerHeight","modalHeigth","cxPropHeaderName","tempLocalData","tempCurrentPos","tempnoMoreRecords","tempSystemData","tempAllselectedCheckbox","tempUserAvilable","temppageNo","tempcxPropPerPage","tempCacheQuery","tempDataCache","cxPropUserDropShow","cxPropUserDropFreeze","cxPropUserDropDisabled","cxPropUserDropBoundary","cxPropUserDropCallout","cxPropUserDropTabindex","cxPropFilter","cxPropFilterYield","cxPropFilterOptions","cxPropSelectedFilterOption","cxPropFilterUserValue","cxPropFilterSystemValue","cxPropSearchable","cxPropFilterable","cxPropRecords","cxPropMinLength","cxPropInputAutocomplete","cxPropInputPlaceholder","cxPropInputAutofocus","cxPropInputDisabled","cxPropInputStyle","cxPropInputMaxlength","cxPropInputReadonly","cxPropInputId","cxPropInputClass","cxPropInputType","cxPropInputName","cxPropInputWidth","cxPropInputValue","cxPropInputAppearance","cxPropInputDirection","cxPropInputWrapperStyle","cxPropInputTabindex"],init:function(){if("view"!=this.getData("cxPropType")?this.setData("cxPropModalWidth","60%"):this.setData("cxPropModalWidth","40%"),this.getData("cxPropFilterYield"))this.setData("cxPropFilter",this.getData("cxPropSelectedFilterOption"));else{if(0==this.getData("cxPropFilterOptions").length&&this.getData("cxPropFilterable")){var e=[];e[0]={id:"AllUsers",category:"All"},e[1]={id:"ActiveUsers",category:"Active"},e[2]={id:"DeactiveUsers",category:"Inactive"},e[3]={id:"ConfirmedUsers",category:"Confirmed"},e[4]={id:"NotConfirmedUsers",category:"Unconfirmed"},e[5]={id:"DeletedUsers",category:"Deleted"},e[6]={id:"ActiveConfirmedUsers",category:"Active Confirmed"},e[7]={id:"AdminUsers",category:"Admin"},e[8]={id:"ActiveConfirmedAdmins",category:"Active Confirmed Admins"},e[9]={id:"CurrentUser",category:"Current"},this.setData("cxPropFilterOptions",e),this.setData("cxPropFilterUserValue","category"),this.setData("cxPropFilterSystemValue","id")}void 0==this.getData("cxPropSelectedFilterOption")||null==this.getData("cxPropSelectedFilterOption")?(this.setData("cxPropSelectedFilterOption","ActiveUsers"),this.setData("cxPropFilter","ActiveUsers")):this.setData("cxPropFilter",this.getData("cxPropSelectedFilterOption"))}},didDestroy:function(){this.setData("cxPropPerPage",200),this.setData("pageNo",1);for(var e=this.getData("cxPropFilterOptions"),t=0;t<e.length;t++)this.setData("cxPropFilter",e[t].id),store.clearCachedQuery(this.getData("cxPropModuleName"),this.queryParams.call(this));this.setData("cxPropPerPage",100),this.setData("pageNo",0),this.setData("cxPropFilter","SelectedUsers"),store.clearCachedQuery(this.getData("cxPropModuleName"),this.queryParams.call(this))},didConnect:function(){void 0==this.getData("cxPropSelectedIds")&&this.setData("cxPropSelectedIds",[])},setCriteria:function(){var e=JSON.parse(JSON.stringify(this.getData("cxPropQueryParams")||{})),t=this.getData("cxPropFilter");if(e.type=t,this.getData("isSearch"))this.getData("cxPropSearchable")&&(e={criteria:"((first_name:starts_with:"+this.getData("cxPropInputValue")+")or(last_name:starts_with:"+this.getData("cxPropInputValue")+")or(email:starts_with:"+this.getData("cxPropInputValue")+"))",type:t});else if(this.getData("selectedList")){for(var a=this.getData("totalAddedObjects"),o=[],s=0;s<a.length;s++)void 0==a[s].id?o.push(a[s]):o.push(a[s].id);var r=o.slice(this.getData("splitAddedItems"),this.getData("splitAddedItems")+100);this.setData("splitAddedItems",this.getData("splitAddedItems")+100),e={ids:r.join(",")}}else;return e},userLookupClose:function(){this.setData("cxPropCacheQuery",!0),this.setData("searchingSearch",!1),this.setData("isSearch",!1),this.setData("cxPropInputValue",""),this.setData("isSearch",!1),this.setData("noMoreRecords",!0),"multiple"==this.getData("cxPropType")&&(this.setData("selectingFlag",!0),this.setData("cxPropPerPage",200),this.setData("splitAddedItems",0),this.setData("splitPreAddedItems",0),this.bodydrop.querySelector("lyte-button").ltProp("Disabled",!0)),this.setData("dataFetched",!1),this.setData("multipleClicks",!1),this.setData("systemData",[]),null!=this.bodydrop.querySelector(".NoUsersLookup")&&(this.bodydrop.querySelector(".NoUsersLookup").style.display="none"),this.setData("localData",[]),null!=this.bodydrop.querySelector("input[name=allSelectCheckbox]")&&this.bodydrop.querySelector("input[name=allSelectCheckbox]").parentElement.parentElement.ltProp("checked",!1),this.setData("pageNo",1),this.setData("currentPos",0),this.getData("selectedList")&&(this.setData("selectedList",!1),this.setData("DselectedList",!1)),this.setData("onModalClose",!1),this.setData("selectedUser",!1),this.setData("localClose",!1)},setSelectedFilterValue:function(){if(this.getData("cxPropFilterable")){var e=this.getData("cxPropFilterYield");e?(this.setData("cxPropFilter",this.getData("cxPropSelectedFilterOption")),this.getData("selectedList")||this.userdrop.ltProp("selected",this.getData("cxPropSelectedFilterOption")),this.getMethods("onFilterOptionSelected")&&this.executeMethod("onFilterOptionSelected",{},this.getData("cxPropSelectedFilterOption"),this.userdrop.component)):e||void 0==this.getData("cxPropSelectedFilterOption")||(this.setData("cxPropFilter",this.getData("cxPropSelectedFilterOption")),this.getData("selectedList")||this.userdrop.ltProp("selected",this.getData("cxPropSelectedFilterOption")))}else void 0==this.getData("cxPropSelectedFilterOption")||null==this.getData("cxPropSelectedFilterOption")?(this.setData("cxPropSelectedFilterOption","ActiveUsers"),this.setData("cxPropFilter","ActiveUsers")):this.setData("cxPropFilter",this.getData("cxPropSelectedFilterOption"))},loadMoreData:function(){this.setData("firstOpen",!1),this.setData("searchingSearch",!1),this.setData("searchingUser",!1);var e=this.bodydrop.querySelector("lyte-table > div"),t=new Event("mouseenter");t._fakeEvent=!0,e.dispatchEvent(t),0==this.getData("systemData").length?this.bodydrop.querySelector(".NoUsersLookup").style.display="":this.bodydrop.querySelector("#userLookupTableBody").style.display="",this.getData("isSearch")||(this.getData("localData").length<=10?this.setData("userCount",!1):this.getData("localData").length>10&&!this.getData("userCount")&&this.setData("userCount",!0)),this.getData("selectedUser")&&(this.setData("DselectedList",!0),this.setData("cxPropPerPage",100),this.setData("selectedUser",!1),this.bodydrop.querySelector(".lyteModal").style.height=this.bodydrop.querySelector(".lyteModal").getBoundingClientRect().height-(this.getData("headerHeight")-this.bodydrop.querySelector("lyte-modal-header").getBoundingClientRect().height)+"px")},storeCurrentSelection:function(){var e=[];if(null!=this.bodydrop.querySelector("input[name=allSelectCheckbox]")&&"SelectedUsers"!=this.getData("cxPropFilter")){var t=this.getData("totalAddedObjects").slice();this.bodydrop.querySelector("input[name=allSelectCheckbox]").parentElement.parentElement.ltProp("checked",!1);for(var a=this.bodydrop.querySelectorAll("input[name=checkbox]"),o=a.length,s=t,r=s.length,i=0;i<r;i++)e[i]=s[i].id;for(var l=0;l<o;l++)0==e.includes(JSON.parse(a[l].value).id)?a[l].parentElement.parentElement.ltProp("checked",!1):a[l].parentElement.parentElement.ltProp("checked",!0)}},filterObserver:function(e,t){this.getData("isSearch")||this.setData("searchingUser",!0),0==this.getData("searchingSearch")&&(0==this.getData("systemData").length?this.bodydrop.querySelector(".NoUsersLookup").style.display="none":this.bodydrop.querySelector("#userLookupTableBody").style.display="none"),"multiple"==this.getData("cxPropType")&&this.storeCurrentSelection();var a=this.getData("cxPropFilter");this.getData("isSearch")||("SelectedUsers"!=a&&this.setData("cxPropCacheQuery",!0),"ActiveUsers"==a&&1==this.getData("pageNo")&&this.setData("cxPropDataCache",!0)),"SelectedUsers"==a&&0!=this.getData("totalAddedObjects").length||"SelectedUsers"!=a?("SelectedUsers"!=a&&0!=this.getData("pageNo")&&this.setData("pageNo",1),("search"!==e||t&&8===t.keyCode||"removeAll"==e||"search"===e&&t&&8!==t.keyCode&&this.getData("localData").length>0)&&(this.setData("localData",[]),this.setData("currentPos",0),this.constructArray("userLookup",!1))):(this.setData("addedItems",this.getData("totalAddedObjects")),this.setData("searchingUser",!1),this.setData("DselectedList",!0),this.bodydrop.querySelector(".lyteModal").style.height=this.bodydrop.querySelector(".lyteModal").getBoundingClientRect().height-(this.getData("headerHeight")-this.bodydrop.querySelector("lyte-modal-header").getBoundingClientRect().height)+"px")},setAssign:function(){var e=!0;this.getMethods("onBeforeAssign")&&(e=this.executeMethod("onBeforeAssign",this.getData("responseData"))),0!=e&&(this.setData("localClose",!0),this.setData("beforeAssign",!0),this.setData("onModalClose",!0),this.setSelectedFilterValue.call(this),this.$node.cxProp("show",!1),this.getMethods("onAssign")&&(e=this.executeMethod("onAssign",this.getData("responseData"))))},fetchUsers:function(e,t,a,o,s){var r=t.slice(this.getData("splitPreAddedItems"),this.getData("splitPreAddedItems")+100);return this.setData("splitPreAddedItems",this.getData("splitPreAddedItems")+100),o++,store.findAll(this.getData("cxPropModuleName"),{ids:r.join(",")},this.getData("cxPropCacheQuery"),this.getData("cxPropDataCache")).then(function(t){t&&t.constructor==Object&&(t=t[this.getData("cxPropModuleName")]),s.push(t);for(var r=0;r<t.length;r++)a.push(t[r]);this.setData("responseData",a),o==e&&this.setAssign.call(this)}.bind(this),function(e){(0,console.error)(e)}.bind(this)),o},filterObs:function(){this.getData("onModalClose")?this.setData("onModalClose",!1):this.getData("backButton")?this.setData("backButton",!1):(this.getData("cxPropInputValue").length>1&&this.getData("isSearch")&&(this.setData("cxPropInputValue",""),this.setData("isSearch",!1)),0!=this.getData("pageNo")&&this.setData("pageNo",1),null!=this.bodydrop.querySelector(".lyteTableScroll")&&(this.bodydrop.querySelector(".lyteTableScroll").scrollTop=0),this.filterObserver.call(this))}.observes("cxPropFilter"),showToggle:function(){this.getData("cxPropShow")?(this.setData("searchingUser",!0),this.setData("firstOpen",!0),this.$node.querySelector("lyte-modal").ltProp("show",!0),this.bodydrop.querySelector("#userLookupTableBody").style.display="none",this.lookupOpen.call(this)):this.$node.querySelector("lyte-modal").ltProp("show",!1)}.observes("cxPropShow"),lookupOpen:function(){if(!this.getData("multipleClicks")&&(this.setData("multipleClicks",!0),!this.getData("dataFetched"))){if("single"==this.getData("cxPropType")){var e=[];e[0]=this.getData("cxPropSelectedId").slice(),this.setData("totalAddedObjects",e)}else this.setData("totalAddedObjects",this.getData("cxPropSelectedIds").slice());"ActiveUsers"==this.getData("cxPropFilter")?this.setData("cxPropDataCache",!0):this.setData("cxPropDataCache",!1),this.constructArray.call(this,"userLookup",!1).then(function(){this.setData("multipleClicks",!1),this.setData("dataFetched",!0),this.setData("usersAvailable",!0)}.bind(this),function(e){(0,console.error)(e)}.bind(this))}},data:function(){return{firstOpen:Lyte.attr("boolean"),cxPropModalWidth:Lyte.attr("string"),cxPropShow:Lyte.attr("boolean",{default:!1}),DselectedList:Lyte.attr("boolean",{default:!1}),selectedList:Lyte.attr("boolean",{default:!1}),cxPropDisplayTableHeader:Lyte.attr("array",{default:["User Name","Role","Email","Profile"]}),cxPropTableHeaders:Lyte.attr("array",{default:["full_name","role","email","profile"]}),cxPropType:Lyte.attr("string",{default:"single"}),checkboxItems:Lyte.attr("array",{default:[]}),selectingFlag:Lyte.attr("boolean",{default:!0}),userModuleId:Lyte.attr("string"),systemData:Lyte.attr("array",{default:[]}),localData:Lyte.attr("array",{default:[]}),pageNo:Lyte.attr("number",{default:1}),noMoreRecords:Lyte.attr("boolean",{default:!0}),addedItems:Lyte.attr("array",{default:[]}),totalAddedObjects:Lyte.attr("array",{default:[]}),responseData:Lyte.attr("array",{default:[]}),currentPos:Lyte.attr("number",{default:0}),isSearch:Lyte.attr("boolean",{default:!1}),contactServerUrl:Lyte.attr("string",{default:Crm.userDetails.contactServerUrl}),onModalClose:Lyte.attr("boolean",{default:!1}),splitAddedItems:Lyte.attr("number",{default:0}),splitPreAddedItems:Lyte.attr("number",{default:0}),usersAvailable:Lyte.attr("boolean"),savedFilter:Lyte.attr("string"),backButton:Lyte.attr("boolean",{default:!1}),multipleClicks:Lyte.attr("boolean",{default:!1}),multiScroll:Lyte.attr("boolean",{default:!1}),searchingSearch:Lyte.attr("boolean",{default:!1}),searchingUser:Lyte.attr("boolean",{default:!0}),makeRequest:Lyte.attr("boolean"),cxPropCacheQuery:Lyte.attr("boolean",{default:!0}),cxPropDataCache:Lyte.attr("boolean",{default:!1}),cxPropPerPage:Lyte.attr("number",{default:200}),cxPropSelectedIds:Lyte.attr("array",{default:[]}),cxPropSelectedId:Lyte.attr("string",{default:""}),cxPropExclude:Lyte.attr("array",{default:[]}),cxPropSearchCount:Lyte.attr("number",{default:500}),cxPropModuleName:Lyte.attr("string",{default:"user"}),cxPropMaxLimit:Lyte.attr("number",{default:500}),beforeAssign:Lyte.attr("boolean",{default:!1}),localClose:Lyte.attr("boolean",{default:!1}),selectedUser:Lyte.attr("boolean",{default:!1}),userCount:Lyte.attr("boolean",{default:!0}),headerHeight:Lyte.attr("number"),modalHeigth:Lyte.attr("number"),cxPropHeaderName:Lyte.attr("string"),tempLocalData:Lyte.attr("array",{default:[]}),tempCurrentPos:Lyte.attr("number"),tempnoMoreRecords:Lyte.attr("boolean"),tempSystemData:Lyte.attr("array",{default:[]}),tempAllselectedCheckbox:Lyte.attr("boolean"),tempUserAvilable:Lyte.attr("boolean"),temppageNo:Lyte.attr("number"),tempcxPropPerPage:Lyte.attr("number"),tempCacheQuery:Lyte.attr("boolean"),tempDataCache:Lyte.attr("boolean"),cxPropUserDropShow:Lyte.attr("boolean",{default:!1}),cxPropUserDropFreeze:Lyte.attr("boolean",{default:!1}),cxPropUserDropDisabled:Lyte.attr("boolean",{default:!1}),cxPropUserDropBoundary:Lyte.attr("object",{default:{}}),cxPropUserDropCallout:Lyte.attr("boolean",{default:!1}),cxPropUserDropTabindex:Lyte.attr("string",{default:"0"}),cxPropFilter:Lyte.attr("string",{default:"AllUsers"}),cxPropFilterYield:Lyte.attr("boolean",{default:!1}),cxPropFilterOptions:Lyte.attr("array",{default:[]}),cxPropSelectedFilterOption:Lyte.attr("string"),cxPropFilterUserValue:Lyte.attr("string",{default:""}),cxPropFilterSystemValue:Lyte.attr("string",{default:""}),cxPropSearchable:Lyte.attr("boolean",{default:!0}),cxPropFilterable:Lyte.attr("boolean",{default:!0}),cxPropRecords:Lyte.attr("number",{default:20}),cxPropMinLength:Lyte.attr("number",{default:2}),cxPropInputAutocomplete:Lyte.attr("string",{default:"off"}),cxPropInputPlaceholder:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.label.search.for.users")}),cxPropInputAutofocus:Lyte.attr("boolean",{default:!1}),cxPropInputDisabled:Lyte.attr("boolean",{default:!1}),cxPropInputStyle:Lyte.attr("string",{default:""}),cxPropInputMaxlength:Lyte.attr("number",{default:25}),cxPropInputReadonly:Lyte.attr("boolean",{default:!1}),cxPropInputId:Lyte.attr("string",{default:"inputId"}),cxPropInputClass:Lyte.attr("string",{default:""}),cxPropInputType:Lyte.attr("string",{default:""}),cxPropInputName:Lyte.attr("string",{default:""}),cxPropInputWidth:Lyte.attr("string",{default:"auto"}),cxPropInputValue:Lyte.attr("string",{default:""}),cxPropInputAppearance:Lyte.attr("string",{default:"flat"}),cxPropInputDirection:Lyte.attr("string",{default:"vertical"}),cxPropInputWrapperStyle:Lyte.attr("string",{default:"border: 1px solid #ddd; padding: 5px;height: 32px; top: unset;"}),cxPropInputTabindex:Lyte.attr("string",{default:"0"})}},actions:{rowClick:function(e,t){if("single"==this.getData("cxPropType")){if(e.target._callee&&"LYTE-RADIOBUTTON"==e.target._callee.tagName)return;t.querySelector("lyte-radiobutton").ltProp("checked",!t.querySelector("lyte-radiobutton").ltProp("checked"))}else if("multiple"==this.getData("cxPropType")){if(e.target._callee&&"LYTE-CHECKBOX"==e.target._callee.tagName)return;t.querySelector("lyte-checkbox").ltProp("checked",!t.querySelector("lyte-checkbox").ltProp("checked"))}},clearInput:function(e){e&&(this.setData("cxPropInputValue",""),this.setData("isSearch",!1),this.filterObserver.call(this,"removeAll"),this.bodydrop.querySelector("lyte-input input").focus())},searchKeyup:function(e){1==this.getData("cxPropInputValue").length&&this.setData("searchingSearch",!1);var t=this.bodydrop.querySelector(".lyteTableScroll");this.keyup.call(this,"userLookup",t,e)},bactToLookup:function(){this.setData("cxPropCacheQuery",this.getData("tempCacheQuery")),this.setData("cxPropDataCache",this.getData("tempDataCache")),this.bodydrop.querySelector(".lyteModal").style.height=this.bodydrop.querySelector(".lyteModal").getBoundingClientRect().height+(this.getData("headerHeight")-this.bodydrop.querySelector("lyte-modal-header").getBoundingClientRect().height)+"px",this.setData("cxPropPerPage",this.getData("tempcxPropPerPage")),this.setData("pageNo",this.getData("temppageNo")),this.setData("selectedList",!1),this.setData("DselectedList",!1),this.bodydrop=this.$node.querySelector("lyte-modal").component.childComp,this.bodybody=this.bodydrop.querySelector("div.lyteTableScroll"),this.userdrop=this.bodydrop.querySelector("lyte-dropdown"),this.bodybox=this.bodydrop.querySelector("lyte-drop-box"),this.userdrop&&(this.userbody=this.userdrop.querySelector("lyte-drop-body"),this.userbox=this.userdrop.querySelector("lyte-drop-box")),this.setData("usersAvailable",this.getData("tempUserAvilable")),this.setData("QueryParam",null),1==this.getData("tempAllselectedCheckbox")&&this.setData("selectingFlag",!1),0==this.getData("totalAddedObjects").length?(this.setData("selectingFlag",!0),this.bodydrop.querySelector("input[name=allSelectCheckbox]").parentElement.parentElement.ltProp("checked",!1)):this.bodydrop.querySelector("input[name=allSelectCheckbox]").parentElement.parentElement.ltProp("checked",this.getData("tempAllselectedCheckbox")),this.setData("noMoreRecords",this.getData("tempnoMoreRecords")),this.setData("localData",this.getData("tempLocalData")),this.setData("currentPos",this.getData("tempCurrentPos")),this.setData("cxPropPerPage",200),this.setData("splitAddedItems",0),this.setData("backButton",!0),this.setData("cxPropFilter",this.getData("savedFilter")),this.getData("cxPropFilterable")&&this.bodydrop.querySelector("lyte-dropdown").ltProp("selected",this.getData("savedFilter")),this.bodydrop.querySelector(".lyteTableScroll").scrollTop=0,this.getData("localData").length<=10?this.setData("userCount",!1):this.getData("localData").length>10&&!this.getData("userCount")&&this.setData("userCount",!0),this.getData("makeRequest")&&(this.setData("makeRequest",!1),this.setData("selectedUser",!1),this.filterObserver.call(this,"removeAll"))},SelectedUserModal:function(){this.setData("tempCacheQuery",this.getData("cxPropCacheQuery")),this.setData("cxPropCacheQuery",!1),this.setData("tempDataCache",this.getData("cxPropDataCache")),this.setData("cxPropDataCache",!1),this.getData("isSearch")&&(this.setData("cxPropInputValue",""),this.setData("isSearch",!1),this.setData("makeRequest",!0)),0==this.getData("systemData").length?this.bodydrop.querySelector(".NoUsersLookup").style.display="none":this.bodydrop.querySelector("#userLookupTableBody").style.display="none",this.setData("headerHeight",this.bodydrop.querySelector("lyte-modal-header").getBoundingClientRect().height),this.setData("modalHeigth",this.bodydrop.querySelector(".lyteModal").getBoundingClientRect().height),this.setData("tempcxPropPerPage",this.getData("cxPropPerPage")),this.setData("cxPropPerPage",100),this.setData("temppageNo",this.getData("pageNo")),this.setData("pageNo",0),this.setData("tempAllselectedCheckbox",this.bodydrop.querySelector("input[name=allSelectCheckbox]").parentElement.parentElement.ltProp("checked")),this.setData("tempLocalData",this.getData("localData")),this.setData("tempCurrentPos",this.getData("currentPos")),this.setData("tempnoMoreRecords",this.getData("noMoreRecords")),this.setData("noMoreRecords",!0),this.setData("tempUserAvilable",this.getData("usersAvailable")),this.setData("selectedUser",!0),this.setData("savedFilter",this.getData("cxPropFilter")),this.setData("selectedList",!0),this.setData("cxPropFilter","SelectedUsers")},assignSelectedUsers:function(){for(var e,t=[],a=[],o=[],s=0,r=0,i=[],l=this.getData("totalAddedObjects"),p=l.length-1;p>=0;p--)"object"!=typeof l[p]?t.push(l[p]):(o.push(l[p]),this.setData("responseData",o));for(var c=0;c<t.length;c++){var n=store.peekRecord(this.getData("cxPropModuleName"),t[c]);n?o.push(n):i.push(t[c])}if(0==i.length&&0!=o.length)this.setData("responseData",o),this.setAssign.call(this);else if(0==i.length&&0==o.length)this.setData("responseData",[]),this.setAssign.call(this);else for(e=i.length<100?1:Math.ceil(i.length/100),s=0;s<e;s++)r=this.fetchUsers.call(this,e,i,o,r,a)},tableScroll:function(e){clearTimeout(this._timeout1),this._timeout1=setTimeout(function(){this.bodyScroll.call(this,"userLookup",e)}.bind(this),100)},mouse:function(e){e._fakeEvent&&setTimeout(function(){e.preventDefault(),e.stopPropagation()},0)},closeUserLookup:function(){var e;this.getMethods("onBeforeLookupClose")&&(e=this.executeMethod("onBeforeLookupClose")),0!=e&&(this.setData("localClose",!0),this.setData("onModalClose",!0),this.setSelectedFilterValue.call(this),this.$node.cxProp("show",!1),this.getMethods("onLookupClose")&&this.executeMethod("onLookupClose"))}},methods:{bodyShow:function(){"multiple"==this.getData("cxPropType")?this.bodydrop.querySelector("lyte-modal-footer").getBoundingClientRect().bottom+1<this.bodydrop.querySelector(".lyteModal").getBoundingClientRect().height&&(this.bodydrop.querySelector("lyte-modal-content").style.height="2000px"):this.bodydrop.querySelector("lyte-modal-content").style.height="2000px",null!=this.bodydrop.querySelector("lyte-input input")&&setTimeout(function(){this.bodydrop.querySelector("lyte-input input").focus()}.bind(this),500),this.getMethods("onBodyShow")&&this.executeMethod("onBodyShow")},bodyBeforeClose:function(){if(this.getData("localClose")?(this.setData("localClosed",!1),this.userLookupClose()):(this.setData("onModalClose",!0),this.setSelectedFilterValue.call(this),this.setData("cxPropShow",!1),this.userLookupClose()),this.getMethods("onBodyBeforeClose"))return this.executeMethod("onBodyBeforeClose")},bodyClose:function(){this.getMethods("onBodyClose")&&this.executeMethod("onBodyClose")},bodyBeforeShow:function(){if(this.bodydrop=this.$node.querySelector("lyte-modal").component.childComp,this.bodybody=this.bodydrop.querySelector("div.lyteTableScroll"),this.userdrop=this.bodydrop.querySelector("lyte-dropdown"),this.bodybox=this.bodydrop.querySelector("lyte-drop-box"),this.userdrop&&(this.userbody=this.userdrop.querySelector("lyte-drop-body"),this.userbox=this.userdrop.querySelector("lyte-drop-box")),this.getMethods("onBodyBeforeShow"))return this.executeMethod("onBodyBeforeShow")},radiobuttonChecked:function(e,t){this.setData("localClose",!0);var a=JSON.parse(e.value);if(a.selected=!0,e.value=JSON.stringify(a),this.setData("onModalClose",!0),this.setSelectedFilterValue.call(this),this.$node.cxProp("show",!1),this.getMethods("onAssign"))return this.executeMethod("onAssign",JSON.parse(e.value))},radiobuttonBeforeUnChecked:function(e,t){var a=JSON.parse(e.value);a.selected=!1,e.value=JSON.stringify(a)},radiobuttonOnBeforeChecked:function(e,t){if(this.getMethods("onBeforeAssign"))return this.executeMethod("onBeforeAssign",JSON.parse(e.value).id)},allCheckboxChecked:function(){if(1==this.getData("selectingFlag"))for(var e=this.bodydrop.querySelectorAll("input[name=checkbox]"),t=e.length,a=0;a<t;a++)e[a].parentElement.parentElement.ltProp("checked",!0);else this.setData("selectingFlag",!0)},allCheckboxUnchecked:function(){for(var e=this.bodydrop.querySelectorAll("input[name=checkbox]"),t=e.length,a=0;a<t;a++)e[a].parentElement.parentElement.ltProp("checked",!1)},checkboxChecked:function(e,t,a){this.getData("systemData")[e].selected=!0;var o=JSON.parse(t.value);o.selected=!0,t.value=JSON.stringify(o),Lyte.arrayUtils(this.getData("totalAddedObjects"),"unshift",JSON.parse(t.value))},checkboxUnchecked:function(e,t,a){this.getData("systemData")[e].selected=!1;var o=JSON.parse(t.value);o.selected=!1,t.value=JSON.stringify(o);for(var s=JSON.parse(t.value).id,r=this.getData("totalAddedObjects"),i=r.length,l=0;l<i;l++)if(void 0!=r[l].id){if(r[l].id==s)break}else if(r[l]==s)break;Lyte.arrayUtils(r,"removeAt",l),this.setData("totalAddedObjects",r)},checkboxOnChanged:function(e,t){if(this.getData("totalAddedObjects").length?this.bodydrop.querySelector("lyte-button").ltProp("Disabled",!1):this.getData("cxPropSelectedIds").length?this.bodydrop.querySelector("lyte-button").ltProp("Disabled",!1):this.bodydrop.querySelector("lyte-button").ltProp("Disabled",!0),this.getMethods("oncheckboxOnChanged"))return this.executeMethod("oncheckboxOnChanged",e,t)},checkboxOnBeforeChecked:function(e,t){if(this.getData("totalAddedObjects").length==this.getData("cxPropMaxLimit"))return this.$node.querySelector("lyte-messagebox").ltProp("show",!0),!1},userSelected:function(e,t,a,o){this.getData("cxPropFilterYield")&&this.getMethods("onFilterOptionSelected")&&this.executeMethod("onFilterOptionSelected",e,t,a),this.setData("cxPropFilter",t)}}},{mixins:["crux-user-utils"]});