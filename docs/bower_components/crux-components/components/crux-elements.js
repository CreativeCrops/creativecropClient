Lyte.Component.register("crux-boolean-component",{_template:'<template tag-name="crux-boolean-component">\t<template is="switch" value="{{cxPropFrom}}"><template case="view">\t\t\t<span class="{{if(ifEquals(cxPropValue,true), \'criteria-yes\')}}"></span>\t\t</template><template case="criteria"></template><template case="filter">\t\t\t<lyte-dropdown on-option-selected="{{method(\'onOptionSelected\')}}" lt-prop-yield="true" lt-prop-tabindex="1" lt-prop-selected="{{cxPropValue}}">\t\t\t\t<template is="registerYield" yield-name="yield">\t\t\t\t\t<lyte-drop-button>\t\t\t\t\t\t<span class="lyteMarginRight">\t\t\t\t\t\t\t<span style="color : #444;">{{selectedLabel}}</span>\t\t\t\t\t\t\t<lyte-icon class="dropdown"></lyte-icon>\t\t\t\t\t\t</span>\t\t\t\t\t</lyte-drop-button>\t\t\t\t\t<lyte-drop-box>\t\t\t\t\t\t<lyte-drop-body>\t\t\t\t\t\t\t<template is="for" items="{{cxPropConditions}}" item="item" index="index">\t\t\t\t\t\t\t\t<lyte-drop-item data-value="{{item.value}}" class="criteria-option {{if(ifEquals(cxPropValue, item.value),\'criteria-option-selected\')}} {{if(ifEquals(cxPropFrom,\'criteria\'),\'criteria-option-from\')}}">{{item.label}}</lyte-drop-item>\t\t\t\t\t\t\t</template>\t\t\t\t\t\t</lyte-drop-body>\t\t\t\t\t</lyte-drop-box>\t\t\t\t</template>\t\t\t</lyte-dropdown>\t\t\t</template><template case="create">\t\t<div>\t\t\t<label class="{{cxPropLabelClass}}">{{cxPropLabel}}</label>\t\t\t<div class="{{cxPropInputClass}}"><lyte-checkbox lt-prop-checked="{{lbind(cxPropValue)}}" lt-prop-type="primary"></lyte-checkbox></div>\t\t</div>\t\t</template></template></template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[1]}]},criteria:{dynamicNodes:[],additional:{next:"filter"}},filter:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1,1,1,0]},{type:"componentDynamic",position:[1,1,3]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1,1]},{type:"for",position:[3,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3,1]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]}]},create:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,0]},{type:"componentDynamic",position:[1,3,0]}]}},default:{}}],_observedAttributes:["cxPropFrom","cxPropValue","cxPropConditions","selectedLabel","cxPropLabel","cxPropLabelClass","cxPropInputClass"],data:function(){return{cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropValue:Lyte.attr("boolean"),cxPropConditions:Lyte.attr("array",{default:[{value:!0,label:_cruxUtils.getI18n("crm.label.selected")},{value:!1,label:_cruxUtils.getI18n("crm.label.notSelected")}]}),selectedLabel:Lyte.attr("string"),cxPropLabel:Lyte.attr("string"),cxPropLabelClass:Lyte.attr("string"),cxPropInputClass:Lyte.attr("string")}},methods:{onOptionSelected:function(t,e){this.setData("cxPropValue",e)}},init:function(){var t=this.getData("cxPropFrom");"criteria"!=t&&"filter"!=t||(void 0==this.getData("cxPropValue")&&this.setData("cxPropValue",!0),this.setSelectedLabel())},getValue:function(){return this.getData("cxPropValue")},validate:function(){return!0},setSelectedLabelObs:function(){this.setSelectedLabel()}.observes("cxPropValue"),setSelectedLabel:function(){for(var t=this.getData("cxPropValue"),e=this.getData("cxPropConditions"),a=0;a<e.length;a++)if(e[a].value==t){this.setData("selectedLabel",e[a].label);break}}}),Lyte.Component.register("crux-date-component",{_template:'<template tag-name="crux-date-component">\t<template is="switch" value="{{cxPropFrom}}"><template case="view"><span class="f13">{{cxPropValue}}</span></template><template case="criteria">\t\t\t<div class="dIB">\t\t\t\t<div class="dIB fL datewidth">\t\t\t\t\t<lyte-input lt-prop-type="date" lt-prop-id="searchValue" lt-prop-placeholder="{{cxPropDatePattern}}" lt-prop-format="{{format}}" lt-prop-start-week-day="{{startWeekDay}}" lt-prop-current-date="{{cxPropValue}}"></lyte-input>\t\t\t\t</div>\t\t\t</div>\t\t</template><template case="filter">\t\t\t<lyte-input lt-prop-type="date" lt-prop-id="searchValue" lt-prop-placeholder="{{cxPropDatePattern}}" lt-prop-format="{{format}}" lt-prop-class="filterDateClass" lt-prop-start-week-day="{{startWeekDay}}" lt-prop-current-date="{{cxPropValue}}"></lyte-input>\t\t</template></template></template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"text",position:[0,0]}]},criteria:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"componentDynamic",position:[1,1,1]}]},filter:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}],_observedAttributes:["cxPropValue","cxPropFrom","cxPropDatePattern","startWeekDay","format","cxPropField","cxPropEmptyValue"],data:function(){return{cxPropValue:Lyte.attr("string"),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropDatePattern:Lyte.attr("string"),startWeekDay:Lyte.attr("number",{default:Crm.calPreferences.WEEKSTARTSON}),format:Lyte.attr("string"),cxPropField:Lyte.attr("object"),cxPropEmptyValue:Lyte.attr("string",{default:""})}},getValue:function(){return new Date(this.$node.querySelector("input").value).toISOString()},validate:function(){return dateValidate("searchdate",this.getData("cxPropField").field_label,"OTH","lv_left_filter",this.$node.querySelector("input"))},init:function(){var t=Crm.userDetails.DATE_PATTERN;this.setData({cxPropDatePattern:t,format:t.toUpperCase()}),"view"==this.getData("cxPropFrom")&&(this.getData("cxPropValue")?this.setData("cxPropValue",Utils.getDateInUsrViewFormat(Utils.getUtcDateObj(new Date(this.getData("cxPropValue"))))):this.setData("cxPropValue",this.getData("cxPropEmptyValue")))},observeValue:function(){"view"!=this.getData("cxPropFrom")&&this.getData("cxPropValue")&&this.setData("cxPropValue",Utils.getDateInUserDatePattern(new Date(this.getData("cxPropValue"))))}.observes("cxPropValue").on("init")}),Lyte.Component.register("crux-date-time-component",{_template:'<template tag-name="crux-date-time-component">\t<template is="switch" value="{{cxPropFrom}}"><template case="view">\t\t\t<span class="f13">{{cxPropValue}}</span>\t\t\t\t</template><template case="criteria">\t\t\t\t<div class="dIB">\t\t\t\t\t<div class="dIB fL datewidth">\t\t\t\t\t\t<lyte-input lt-prop-type="date" lt-prop-id="searchValue" lt-prop-placeholder="{{cxPropDatePattern}}" lt-prop-current-date="{{selectedDate}}" lt-prop-start-week-day="{{startWeekDay}}"></lyte-input>\t\t\t\t\t</div>\t\t\t\t\t<div class="dIB fL" style="width : 90px;">\t\t\t\t\t\t<lyte-input lt-prop-type="time" lt-prop-minute-interval="30" lt-prop-dropdown="true" lt-prop-direction="vertical" lt-prop-appearance="flat" lt-prop-time-format="{{cxPropTimeFormat}}" lt-prop-default-time="{{startTime}}" lt-prop-start-time="12:00"></lyte-input>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t\t\t</template></template></template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"text",position:[1,0]}]},criteria:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"componentDynamic",position:[1,1,1]},{type:"attr",position:[1,3,1]},{type:"componentDynamic",position:[1,3,1]}]}},default:{}}],_observedAttributes:["cxPropValue","cxPropFrom","cxPropDatePattern","cxPropTimeFormat","startWeekDay","format","cxPropEmptyValue","selectedDate","startTime","defaultTime"],data:function(){return{cxPropValue:Lyte.attr("string"),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropDatePattern:Lyte.attr("string"),cxPropTimeFormat:Lyte.attr("number"),startWeekDay:Lyte.attr("number",{default:Crm.calPreferences.WEEKSTARTSON}),format:Lyte.attr("string"),cxPropEmptyValue:Lyte.attr("string",{default:""}),selectedDate:Lyte.attr("string"),startTime:Lyte.attr("string"),defaultTime:Lyte.attr("string")}},init:function(){var t=Crm.userDetails.DATE_PATTERN;this.setData({cxPropDatePattern:t,format:t.toUpperCase()}),"view"==this.getData("cxPropFrom")?this.getData("cxPropValue")?this.setData("cxPropValue",Utils.getDateTimeInUsrViewFormat(Utils.getUtcDateObj(new Date(this.getData("cxPropValue"))))):this.setData("cxPropValue",this.getData("cxPropEmptyValue")):(this.getData("cxPropTimeFormat")||(Crm.userDetails.TIME_FORMAT.indexOf("a")?(timeFormat="12",this.setData({cxPropTimeFormat:"12",startTime:"12:00 AM"})):this.setData({cxPropTimeFormat:"24",startTime:"12:00"})),this.getData("cxPropValue")?(this.setData("selectedDate",Utils.getDateInUserDatePattern(new Date(this.getData("cxPropValue")))),this.setData("defaultTime",Utils.getTimeInUserFormat(new Date(this.getData("cxPropValue"))))):(this.setData("selectedDate",Utils.getDateInUserDatePattern(new Date)),this.setData("defaultTime","01:00"+("12"==timeFormat?_cruxI18n.getMsg("AM"):""))))}}),Lyte.Component.register("crux-email-component",{_template:'<template tag-name="crux-email-component">\t<template is="switch" value="{{cxPropFrom}}"><template case="create"><lyte-input lt-prop-class="borderBottom" lt-prop-type="text" lt-prop-value="{{lbind(cxPropValue)}}" lt-prop-label="{{cxPropLabel}}" lt-prop-maxlength="{{cxPropMaxlength}}" lt-prop-direction="horizontal"> </lyte-input></template><template case="view"><a class="green" href="mailto:{{cxPropValue}}">{{cxPropValue}}</a></template></template></template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{create:{dynamicNodes:[{type:"attr",position:[0]},{type:"componentDynamic",position:[0]}]},view:{dynamicNodes:[{type:"attr",position:[0]},{type:"text",position:[0,0]}]}},default:{}}],_observedAttributes:["cxPropValue","cxPropEmptyValue","cxPropFrom","cxPropLabel"],data:function(){return{cxPropValue:Lyte.attr("string"),cxPropEmptyValue:Lyte.attr("string",{default:""}),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropLabel:Lyte.attr("string")}},init:function(){this.getData("cxPropValue")||this.setData("cxPropValue",this.getData("cxPropEmptyValue"))}}),Lyte.Component.register("crux-layout-component",{_template:'<template tag-name="crux-layout-component">\t<template is="switch" value="{{cxPropFrom}}"><template case="view">\t\t{{cxPropValue.name}}\t\t\t</template><template case="filter"></template><template case="criteria">\t\t\t<lyte-dropdown lt-prop-yield="true" lt-prop-type="multisearch" lt-prop-tabindex="1" on-add="{{method(\'addToList\')}}" on-remove="{{method(\'removeFromList\')}}" lt-prop-disabled-list="{{disabledList}}">\t\t\t\t<template is="registerYield" yield-name="yield">\t\t\t\t\t<lyte-drop-button class="outerbox1">\t\t\t\t\t\t<template is="for" items="{{value}}" item="layout" index="index">\t\t\t\t\t\t\t<span class="singleItem" data-value="{{layout.id}}">{{layout.name}}<lyte-drop-remove class="boxclose">x</lyte-drop-remove></span>\t\t\t\t\t\t</template>\t\t\t\t\t\t<lyte-search lt-prop-type="text" lt-prop-query-selector="{&quot;scope&quot;:&quot;.parentscope_layout&quot;, &quot;target&quot;:&quot;.cruxlayoutList&quot;, &quot;search&quot;:&quot;.cruxlayoutList&quot;}" on-search="{{method(\'showNoResult\')}}" id="search_layout" lt-prop-placeholder="{{cruxGetI18n(\'None\')}}"></lyte-search>\t\t\t\t\t</lyte-drop-button>\t\t\t\t\t<lyte-drop-box>\t\t\t\t\t\t<lyte-drop-body class="parentscope_layout">\t\t\t\t\t\t\t\t<template is="for" items="{{layout}}" item="layout" index="index">\t\t\t\t\t\t\t\t\t<lyte-drop-item class="picklist_values cruxlayoutList" data-value="{{layout.id}}">{{layout.name}}</lyte-drop-item>\t\t\t\t\t\t\t\t</template>\t\t\t\t\t\t\t<template is="if" value="{{expHandlers(layoutLength,\'!\')}}"><template case="true">\t\t\t\t\t\t\t\t<lyte-drop-item class="picklist_values lyteDropdown-disabled">{{cruxGetI18n(\'crm.label.no.options.found\')}}</lyte-drop-item>\t\t\t\t\t\t\t</template></template>\t\t\t\t\t\t</lyte-drop-body>\t\t\t\t\t</lyte-drop-box>\t\t\t\t</template>\t\t\t</lyte-dropdown>\t\t</template></template></template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"text",position:[1]}]},filter:{dynamicNodes:[],additional:{next:"criteria"}},criteria:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1,2]}]},{type:"attr",position:[1,3]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1,1]},{type:"for",position:[3,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"attr",position:[3,1,3]},{type:"if",position:[3,1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[3,1]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]}]}},default:{}}],_observedAttributes:["cxPropValue","cxPropFrom","cxPropModule","layout","value","layoutLength","disabledList","cxPropEmptyValue"],data:function(){return{cxPropValue:Lyte.attr("object"),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropModule:Lyte.attr("string"),layout:Lyte.attr("array"),value:Lyte.attr("array",{default:[]}),layoutLength:Lyte.attr("boolean",{default:!0}),disabledList:Lyte.attr("array",{default:["cruxDisabled"]}),cxPropEmptyValue:Lyte.attr("string",{default:""})}},init:function(){var t=this.getData("cxPropFrom");"criteria"==t||"filter"==t?(this.setData("layout",store.peekAll("layout",{module:this.getData("cxPropModule")})),0==this.getData("layout").length&&this.setData("layoutLength",!1)):this.getData("cxPropValue")||this.setData("value",this.getData("cxPropEmptyValue"))},methods:{addToList:function(t,e,a){Lyte.arrayUtils(this.getData("value"),"push",this.getData("layout").filterBy({id:e})[0]),this.$node.querySelector("lyte-search").ltProp("placeholder",""),this.getData("layout").length==JSON.parse(a).length&&this.setData("layoutLength",!1)},removeFromList:function(t,e){for(var a=this.getData("value"),o=0;o<a.length;o++)if(a[o].id==e){Lyte.arrayUtils(this.getData("value"),"removeAt",o);break}this.setData("layoutLength",!0)},showNoResult:function(t){this.setData("layoutLength",0!=t.length)}},getValue:function(){for(var t=this.getData("value"),e=[],a=0;a<t.length;a++)e.push(t[a].id);return e},valiate:function(){return!0}}),Lyte.Component.register("crux-lookup-component",{_template:'<template tag-name="crux-lookup-component">\t<template is="switch" value="{{cxPropFrom}}"><template case="criteria">\t\t\t<lyte-dropdown on-before-show="{{method(\'onBeforeShow\')}}" on-scroll="{{method(&quot;onBodyScroll&quot;)}}" lt-prop-yield="true" on-add="{{method(\'addToList\')}}" on-remove="{{method(\'removeFromList\')}}" lt-prop-type="multisearch" lt-prop-tabindex="14">\t\t\t\t<template is="registerYield" yield-name="yield">\t\t\t\t\t<lyte-drop-button class="outerbox1">\t\t\t\t\t\t<template is="for" items="{{renderItems}}" item="selitem" index="indeval">\t\t\t\t\t\t\t<span class="singleItem" data-value="{{selitem[\'value\']}}">\t\t\t\t\t\t\t\t{{selitem[cxPropFieldSelector]}}\t\t\t\t\t\t\t\t<lyte-drop-remove class="boxclose"></lyte-drop-remove>\t\t\t\t\t\t\t</span>\t\t\t\t\t\t</template>\t\t\t\t\t\t<lyte-input onkeyup="{{action(\'onKeyUpSearch\',event)}}" onkeydown="{{action(\'onKeyDownSearch\',event)}}" lt-prop-value="{{lbind(cxPropInputValue)}}" lt-prop-type="text" lt-prop-direction="vertical"> </lyte-input>\t\t\t\t\t\t\t\t\t\t\t\t\t</lyte-drop-button>\t\t\t\t\t<lyte-drop-box>\t\t\t\t\t\t<lyte-drop-body class="lookUp{{cxPropModule}}">\t\t\t\t\t\t\t<template is="for" items="{{systemData}}" item="item" index="indeval">\t\t\t\t\t\t\t\t<lyte-drop-item data-value="{{item[cxPropValueSelector]}}"> {{item[cxPropFieldSelector]}} </lyte-drop-item>\t\t\t\t\t\t\t</template>\t\t\t\t\t\t\t<template is="if" value="{{cxPropInputValue}}"><template case="true">\t\t\t\t\t\t\t\t<lyte-drop-item data-value="{{cxPropInputValue}}">{{cxPropInputValue}}</lyte-drop-item>\t\t\t\t\t\t\t</template></template>\t\t\t\t\t\t\t<template is="if" value="{{expHandlers(expHandlers(systemData.length,\'==\',0),\'&amp;&amp;\',expHandlers(cxPropInputValue,\'!\'))}}"><template case="true">\t\t\t\t\t\t\t\t<div class="showNoResultDiv">{{cruxGetI18n(\'None\')}}</div>\t\t\t\t\t\t\t</template></template>\t\t\t\t\t\t</lyte-drop-body>\t\t\t\t\t</lyte-drop-box>\t\t\t\t</template>\t\t\t</lyte-dropdown>\t\t</template><template case="filter">\t\t\t\t\t</template><template case="view">\t\t\t<link-to data-zcqa="{{cxPropZcqa}}" lt-prop-route="{{cxPropRouteName}}" lt-prop-dp="{{cxPropDynamicParams}}" lt-prop-qp="{{cxPropQueryParams}}" lt-prop-id="{{cxPropId}}" lt-prop-td="{{cxPropTransitionData}}" lt-prop-class="link">\t\t\t\t<template is="if" value="{{expHandlers(cxPropIconClass,\'&amp;&amp;\',cxPropValue)}}"><template case="true">\t\t\t\t\t<div class="{{cxPropIconClass}}"></div>\t\t\t\t</template></template>\t\t\t{{cxPropValue}}\t\t\t</link-to>\t\t</template></template></template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{criteria:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,3]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1]},{type:"attr",position:[3,1,1]},{type:"for",position:[3,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"attr",position:[3,1,3]},{type:"if",position:[3,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,1,5]},{type:"if",position:[3,1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"componentDynamic",position:[3,1]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]}]},filter:{dynamicNodes:[]},view:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"text",position:[1,3]},{type:"componentDynamic",position:[1]}]}},default:{}}],_observedAttributes:["cxPropModule","cxPropValue","cxPropRouteName","cxPropZcqa","cxPropDynamicParams","cxPropQueryParams","cxPropTransitionData","cxPropIconClass","cxPropId","cxPropFrom","cxPropExclude","currentPos","localData","pageNo","noMoreRecord","cxPropRecord","systemData","cxPropModuleName","cxPropCacheQuery","cxPropDataCache","cxPropPerPage","isSearch","cxPropSearchCount","cxPropInputValue","cxPropMinLength","cxPropValueSelector","cxPropFieldSelector","cxPropEmptyValue","renderItems"],data:function(){return{cxPropModule:Lyte.attr("string"),cxPropValue:Lyte.attr("string"),cxPropRouteName:Lyte.attr("string"),cxPropZcqa:Lyte.attr("string"),cxPropDynamicParams:Lyte.attr("string"),cxPropQueryParams:Lyte.attr("string"),cxPropTransitionData:Lyte.attr("string"),cxPropIconClass:Lyte.attr("string"),cxPropId:Lyte.attr("string"),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropExclude:Lyte.attr("array",{default:[]}),currentPos:Lyte.attr("number",{default:0}),localData:Lyte.attr("array",{default:[]}),pageNo:Lyte.attr("number",{default:1}),noMoreRecord:Lyte.attr("boolean",{default:!0}),cxPropRecord:Lyte.attr("number",{default:50}),systemData:Lyte.attr("array",{default:[]}),cxPropModuleName:Lyte.attr("string"),cxPropCacheQuery:Lyte.attr("boolean",{default:!1}),cxPropDataCache:Lyte.attr("boolean",{default:!1}),cxPropPerPage:Lyte.attr("number",{default:200}),isSearch:Lyte.attr("boolean",{default:!1}),cxPropSearchCount:Lyte.attr("number",{default:500}),cxPropInputValue:Lyte.attr("string",{default:""}),cxPropMinLength:Lyte.attr("number",{default:2}),cxPropValueSelector:Lyte.attr("string",{default:"id"}),cxPropFieldSelector:Lyte.attr("string",{default:""}),cxPropEmptyValue:Lyte.attr("string",{default:""}),renderItems:Lyte.attr("array",{default:[]})}},init:function(){this.getData("cxPropModule")&&this.setData("cxPropModuleName",moduleRecordMapping[this.getData("cxPropModule")].id),"view"!=this.getData("cxPropFrom")||this.getData("cxPropValue")||this.setData("cxPropValue",this.getData("cxPropEmptyValue"))},actions:{onKeyUpSearch:function(t){var e="lookUp"+this.getData("cxPropModule"),a=document.querySelector("."+e);this.keyup.call(this,"lookupComponent",a,t)},stopPropgation:function(){event.stopPropagation()}},methods:{addToList:function(t,e,a){for(var o=this.getData("systemData"),i=0;i<o.length;i++)if(o[i][this.getData("cxPropValueSelector")]==e){Lyte.arrayUtils(this.getData("renderItems"),"push",o[i]);break}if(e==this.getData("cxPropInputValue")){var r={[this.getData("cxPropFieldSelector")]:this.getData("cxPropInputValue"),[this.getData("cxPropValueSelector")]:this.getData("cxPropInputValue")};Lyte.arrayUtils(this.getData("renderItems"),"push",r)}},removeFromList:function(t,e,a){for(var o=0;o<this.getData("renderItems").length;o++)this.getData("renderItems")[o][this.getData("cxPropValueSelector")]==e&&Lyte.arrayUtils(this.getData("renderItems"),"removeAt",o,1)},onBeforeShow:function(){this.constructArray.call(this,"lookupComponent",!1)},onBodyScroll:function(t){this.bodyScroll.call(this,"lookupComponent",t)}},setCriteria:function(){return this.getData("isSearch")?{criteria:this.getData("cxPropFieldSelector")+":starts_with:"+this.getData("cxPropInputValue")}:{fields:[this.getData("cxPropFieldSelector")]}},getValue:function(){for(var t=this.getData("renderItems")[0][this.getData("cxPropValueSelector")],e=1;e<this.getData("renderItems").length;e++)t=t+","+this.getData("renderItems")[e][this.getData("cxPropValueSelector")];return t},moduleNameObserver:function(){this.setData("cxPropModuleName",moduleRecordMapping[this.getData("cxPropModule")].id)}.observes("cxPropModule")},{mixins:["crux-user-utils"]}),Lyte.Component.register("crux-multi-picklist-component",{_template:'<template tag-name="crux-multi-picklist-component">{{value}}</template>',_dynamicNodes:[{type:"text",position:[0]}],_observedAttributes:["cxPropValue","value","cxPropEmptyValue"],data:function(){return{cxPropValue:Lyte.attr("array"),value:Lyte.attr("string"),cxPropEmptyValue:Lyte.attr("string",{default:""})}},init:function(){this.getData("cxPropValue")?this.setData("value",this.getData("cxPropValue").join("; ")):this.setData("value",this.getData("cxPropEmptyValue"))}}),Lyte.Component.register("crux-number-component",{_template:'<template tag-name="crux-number-component">\t<template is="switch" value="{{cxPropFrom}}"><template case="criteria"></template><template case="create">\t\t\t<div><template is="if" value="{{currencyCode}}"><template case="true"><div data-zcqa="currencyCode" id="currencyCode" class="fL mT10 dIB">{{currencyCode}}</div></template></template>\t\t\t<div class="dIB mT10"><lyte-input lt-prop-type="number" lt-prop-class="f15" lt-prop-value="{{lbind(cxPropValue)}}" lt-prop-label="{{cxPropLabel}}" lt-prop-direction="horizontal"></lyte-input></div></div>\t\t</template><template case="filter">\t\t\t<lyte-input lt-prop-type="number" id="{{cxPropId}}" lt-prop-appearance="box" lt-prop-wrapper-style="height : 25px; padding : 0px 0px 10px 0px;" lt-prop-value="{{cxPropValue}}" class="{{cxPropClass}}"></lyte-input>\t\t\t<template is="if" value="{{currencyCode}}"><template case="true">\t\t\t\t<div id="currencyCode1">{{currencyCode}}</div>\t\t\t</template></template>\t\t</template><template case="view">\t\t\t<div style="text-align:right !important; white-space: nowrap;">\t\t\t\t{{value}}\t\t\t\t\t\t\t</div>\t\t</template></template></template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{criteria:{dynamicNodes:[],additional:{next:"create"}},create:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"if",position:[1,0],cases:{true:{dynamicNodes:[{type:"text",position:[0,0]}]}},default:{}},{type:"attr",position:[1,2,0]},{type:"componentDynamic",position:[1,2,0]}]},filter:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}]},view:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}}],_observedAttributes:["cxPropFrom","cxPropId","cxPropValue","cxPropField","cxPropEmptyValue","value","cxPropLabel","cxPropClass"],data:function(){return{cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropId:Lyte.attr("string"),cxPropValue:Lyte.attr("string"),cxPropField:Lyte.attr("object"),cxPropEmptyValue:Lyte.attr("string",{default:""}),value:Lyte.attr("string"),cxPropLabel:Lyte.attr("string"),cxPropClass:Lyte.attr("string")}},getValue:function(){return this.$node.querySelector("input").value},validate:function(){if(!this.getValue()){var t=this.getData("cxPropField");return alert(_cruxUtils.getI18n("crm.field.valid.check",t.field_label)),this.$node.querySelector("input").focus(),!1}return!0},init:function(){if("view"==this.getData("cxPropFrom")){var t=this.getData("cxPropValue"),e=this.getData("cxPropField");t||!t&&!e.custom_field?(t=t||0,"currency"==e.data_type&&(t=Utils.convertCurrencyValue(void 0,t,e.decimal_place)),this.setData("value",t.toString())):this.setData("value",this.getData("cxPropEmptyValue"))}}}),Lyte.Component.register("crux-phone-component",{_template:'<template tag-name="crux-phone-component">\t<template is="if" value="{{cxPropValue}}"><template case="true">\t\t<template is="if" value="{{expHandlers(expHandlers(cxPropCallAllowed,\'==\',false),\'||\',cxPropField.private.restricted)}}"><template case="true">\t\t\t<div onmouseover="{{action(\'onMouseOver\')}}" onmouseout="{{action(\'onMouseOut\')}}" class="phoneRtl" style="min-width : 100%;">\t\t\t\t<zpb-phone phoneno="{{cxPropValue}}" callbackparam="{&quot;module&quot;:&quot;{{module}}&quot;, &quot;searchid&quot;:&quot;{{entityId}}&quot;}">{{cxPropDisplayValue}}</zpb-phone>\t\t\t</div>\t\t</template><template case="false"><template is="if" value="{{outbound}}"><template case="true">\t\t\t<div class="phoneRtl" style="min-width:100%">{{cxPropDisplayValue}}<a href="javascript;" class="calliconOuter fN" onclick="{{action(\'onClick\')}}"><i class="callIcon"></i><span id="calllabel1">{{cruxGetI18n(\'Call\')}}</span></a></div>\t\t\t\t</template><template case="false">\t\t\t<div onmouseover="{{action(\'onMouseOver\')}}" onmouseout="{{action(\'onMouseOut\')}}" class="phoneRtl" style="min-width : 100%;">\t\t\t\t<zpb-phone phoneno="{{cxPropValue}}" callbackparam="{&quot;module&quot;:&quot;{{module}}&quot;, &quot;searchid&quot;:&quot;{{entityId}}&quot;}">{{cxPropDisplayValue}}</zpb-phone>\t\t\t\t<a style="visibility : hidden;" class="pH2 phoneRtl" title="{{cruxGetI18n(\'crm.phoneNo.Link.Title\')}}" href="skype:{{cxPropValue}}?call" onclick="sE();"></a>\t\t\t</div>\t\t\t\t</template></template></template></template>\t</template></template></template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"attr",position:[1,2]},{type:"text",position:[1,2,1,0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["cxPropValue","cxPropFrom","cxPropDisplayValue","outbound","cxPropField","cxPropCallAllowed","cxPropEmptyValue"],data:function(){return{cxPropValue:Lyte.attr("string"),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropDisplayValue:Lyte.attr("string"),outbound:Lyte.attr("boolean",{default:!1}),cxPropField:Lyte.attr("object"),cxPropCallAllowed:Lyte.attr("boolean"),cxPropEmptyValue:Lyte.attr("string",{default:""})}},actions:{onMouseOver:function(){var t=this.$node;t.querySelector("a")&&(t.querySelector("a").style.visibility="visible")},onMouseOut:function(){var t=this.$node;t.querySelector("a")&&(t.querySelector("a").style.visibility="hidden")},onClick:function(){event.preventDefault(),this.throwEvent("onPhoneClick",event.target,this.getData("cxPropValue"))}},init:function(){var t=this.getData("cxPropValue");if("view"==this.getData("cxPropFrom"))if(t){var e=t;e.match(/[0-9]/)&&(e="(",10==t.length?e+=t.substring(0,3)+") "+t.substring(3,6)+"-"+t.substring(6,10):9==t.length?e+=t.substring(0,5)+")-"+t.substring(5,9):e=t),this.setData("cxPropDisplayValue",e),this.setData("outbound",Crm.userDetails.TELEPHONY_ENABLED)}else this.setData("cxPropDisplayValue",this.getData("cxPropEmptyValue"))}}),Lyte.Component.register("crux-picklist-component",{_template:'<template tag-name="crux-picklist-component">\t<template is="switch" value="{{cxPropFrom}}"><template case="filter"></template><template case="criteria">\t\t\t<lyte-dropdown lt-prop-yield="true" lt-prop-type="multisearch" lt-prop-tabindex="1" on-add="{{method(\'addToList\', cxPropField)}}" on-remove="{{method(\'removeFromList\', cxPropField)}}" lt-prop-disabled-list="{{disabledList}}">\t\t\t\t<template is="registerYield" yield-name="yield">\t\t\t\t\t<lyte-drop-button class="outerbox1">\t\t\t\t\t\t<template is="for" items="{{displayValue}}" item="item" index="index">\t\t\t\t\t\t\t<span class="singleItem" data-value="{{item.actual_value}}">{{item.display_value}}<lyte-drop-remove class="boxclose">x</lyte-drop-remove></span>\t\t\t\t\t\t</template>\t\t\t\t\t\t<lyte-search lt-prop-type="text" lt-prop-query-selector="{&quot;scope&quot;:&quot;{{concat(&quot;.parentscope_&quot;, cxPropField.api_name)}}&quot;, &quot;target&quot;:&quot;.picklist_values&quot;, &quot;search&quot;:&quot;lyte-drop-item&quot;}" on-search="{{method(\'showNoResult\', cxPropField)}}" id="{{concat(\'search_\', cxPropField.api_name)}}" lt-prop-placeholder="{{placeholder}}"></lyte-search>\t\t\t\t\t</lyte-drop-button>\t\t\t\t\t<lyte-drop-box>\t\t\t\t\t\t<lyte-drop-body class="{{concat(\'parentscope_\', cxPropField.api_name)}}" onscroll="{{action(\'scroll\')}}">\t\t\t\t\t\t\t<template is="for" items="{{pickListValues}}" item="item" index="indeval"><lyte-drop-item class="picklist_values" data-value="{{item.actual_value}}" data-extra="{{item.extra}}">{{item.display_value}}</lyte-drop-item></template>\t\t\t\t\t\t\t<template is="if" value="{{showNoOption}}"><template case="true"><lyte-drop-item class="picklist_values lyteDropdown-disabled" data-value="cruxDisabled">{{cruxGetI18n(\'crm.label.no.options.found\')}}</lyte-drop-item></template></template>\t\t\t\t\t\t</lyte-drop-body>\t\t\t\t\t</lyte-drop-box>\t\t\t\t</template>\t\t\t</lyte-dropdown>\t\t</template><template case="view">{{cxPropValue}}</template></template></template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{filter:{dynamicNodes:[],additional:{next:"criteria"}},criteria:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1,2]}]},{type:"attr",position:[1,3]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1]},{type:"attr",position:[3,1,1]},{type:"for",position:[3,1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"text",position:[0,0]},{type:"componentDynamic",position:[0]}]},{type:"attr",position:[3,1,3]},{type:"if",position:[3,1,3],cases:{true:{dynamicNodes:[{type:"text",position:[0,0]},{type:"componentDynamic",position:[0]}]}},default:{}},{type:"componentDynamic",position:[3,1]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]}]},view:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}],_observedAttributes:["cxPropFrom","cxPropField","cxPropValue","displayValue","pickListValues","value","origLen","showNoOption","disabledList","cxPropEmptyValue","placeholder"],data:function(){return{cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropField:Lyte.attr("object"),cxPropValue:Lyte.attr("string"),displayValue:Lyte.attr("array",{default:[]}),pickListValues:Lyte.attr("array"),value:Lyte.attr("array",{default:[]}),origLen:Lyte.attr("number"),showNoOption:Lyte.attr("boolean",{default:!1}),disabledList:Lyte.attr("array",{default:["cruxDisabled"]}),cxPropEmptyValue:Lyte.attr("string",{default:""}),placeholder:Lyte.attr("string",{default:_cruxUtils.getI18n("None")})}},methods:{showNoResult:function(t,e){if(e[0]&&"true"==e[0].getAttribute("data-extra")&&e.pop(),!document.querySelector("[data-extra='true']")||event&&"LYTE-DROP-ITEM"==event.target.tagName||Lyte.arrayUtils(this.getData("pickListValues"),"pop"),0==e.length){var a=arguments[2].querySelector("input").value;Lyte.arrayUtils(this.getData("pickListValues"),"push",{actual_value:a,display_value:a,extra:"true"})}},addToList:function(t,e,a){Lyte.arrayUtils(this.getData("value"),"push",a),this.setData("placeholder",""),document.getElementById("search_"+t.api_name).setValue("")},removeFromList:function(t,e,a){for(var o=this.getData("value"),i=0;i<o.length;i++)if(o[i]==a){for(var r=Lyte.arrayUtils(this.getData("value"),"removeAt",i),p=0;p<this.getData("pickListValues").length;p++)if(this.getData("pickListValues")[p].actual_value==r){"true"==this.getData("pickListValues")[p].extra?Lyte.arrayUtils(this.getData("pickListValues"),"pop"):this.setData("origLen",this.getData("origLen")+1);break}break}0==o.length&&this.setData("placeholder",_cruxUtils.getI18n("None"))}},observeValue:function(){if(this.getData("cxPropField"),arguments[0].insertedItems){for(var t=arguments[0].insertedItems[0],e=this.getData("pickListValues"),a=0;a<e.length;a++)if(e[a].actual_value==t){Lyte.arrayUtils(this.getData("displayValue"),"push",e[a]),"true"==e[a].extra?Lyte.arrayUtils(this.getData("pickListValues"),"pop"):this.setData("origLen",this.getData("origLen")-1);break}}else Lyte.arrayUtils(this.getData("displayValue"),"removeAt",arguments[0].index)}.observes("value.[]"),validate:function(){var t,e=this.getData("displayValue"),a=e.length;if(0==e.length)return alert(_cruxUtils.getI18n("crm.field.valid.check",this.getData("cxPropField").field_label)),!1;for(t=0;t<a;t++)if(e[t].actual_value.replace(/^\s+/g,"").replace(/\s+$/g,"").indexOf("*")>-1)return alert(_cruxUtils.getI18n("crm.alert.character.not.allowed"),["*"]),!1;return!0},getValue:function(){for(var t=[],e=0;e<this.getData("displayValue").length;e++)t.push(this.getData("displayValue")[e].actual_value);return t},observeLen:function(){0==this.getData("origLen")?this.setData("showNoOption",!0):this.setData("showNoOption",!1)}.observes("origLen"),observeField:function(){if(this.getData("cxPropField")){var t=this.getData("cxPropField").pick_list_values,e=t.map(function(t){return t.display_value}),a=e.slice(0);e.sort();var o=[],i=0;for("filter"==this.getData("cxPropFrom")&&(i=1);i<e.length;i++)o.push(t[a.indexOf(e[i])]);this.setData({pickListValues:o,origLen:o.length})}}.observes("cxPropField").on("init"),init:function(){"view"==this.getData("cxPropFrom")&&(this.getData("cxPropValue")?100==this.getData("cxPropField").ui_type&&this.setData("cxPropValue",this.getData("cxPropValue").join("; ")):this.setData("cxPropValue",this.getData("cxPropEmptyValue")))}}),Lyte.Component.register("crux-tag-component",{_template:'<template tag-name="crux-tag-component">\t<template is="switch" value="{{cxPropFrom}}"><template case="view"><template is="if" value="{{cxPropValue}}"><template case="true">\t\t\t\t<ul class="listview_taglists w230 m0 dIB">\t\t\t\t\t<template is="for" items="{{cxPropValue}}" item="val" index="index">\t\t\t\t\t\t<li class="tagElementList f12 bR2 dIB bdr1px">{{val.name}}</li>\t\t\t\t\t</template>\t\t\t\t</ul>\t\t\t</template></template></template><template case="filter"></template><template case="criteria">\t\t\t<lyte-dropdown lt-prop-yield="true" lt-prop-type="multisearch" lt-prop-tabindex="1" on-add="{{method(\'addToList\')}}" on-remove="{{method(\'removeFromList\')}}" lt-prop-disabled-list="{{disabledList}}">\t\t\t\t<template is="registerYield" yield-name="yield">\t\t\t\t\t<lyte-drop-button class="outerbox1">\t\t\t\t\t\t<template is="for" items="{{value}}" item="tag" index="index">\t\t\t\t\t\t\t<span class="singleItem" data-value="{{tag.id}}">{{tag.name}}<lyte-drop-remove class="boxclose">x</lyte-drop-remove></span>\t\t\t\t\t\t</template>\t\t\t\t\t\t<lyte-search lt-prop-type="text" lt-prop-query-selector="{&quot;scope&quot;:&quot;.parentscope_Tag&quot;, &quot;target&quot;:&quot;.cruxTagList&quot;, &quot;search&quot;:&quot;lyte-drop-item&quot;}" on-search="{{method(\'showNoResult\')}}" id="search_Tag" lt-prop-placeholder="{{cruxGetI18n(\'None\')}}"></lyte-search>\t\t\t\t\t</lyte-drop-button>\t\t\t\t\t<lyte-drop-box>\t\t\t\t\t\t<lyte-drop-body class="parentscope_Tag">\t\t\t\t\t\t\t\t<template is="for" items="{{tags}}" item="tag" index="index">\t\t\t\t\t\t\t\t\t<lyte-drop-item class="picklist_values cruxTagList" data-value="{{tag.id}}">{{tag.name}}</lyte-drop-item>\t\t\t\t\t\t\t\t</template>\t\t\t\t\t\t\t<template is="if" value="{{expHandlers(tagsLength,\'!\')}}"><template case="true">\t\t\t\t\t\t\t\t<lyte-drop-item class="picklist_values lyteDropdown-disabled">{{cruxGetI18n(\'crm.label.no.options.found\')}}</lyte-drop-item>\t\t\t\t\t\t\t</template></template>\t\t\t\t\t\t</lyte-drop-body>\t\t\t\t\t</lyte-drop-box>\t\t\t\t</template>\t\t\t</lyte-dropdown>\t\t</template></template></template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"text",position:[1,0]}]}]}},default:{}}]},filter:{dynamicNodes:[],additional:{next:"criteria"}},criteria:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1,2]}]},{type:"attr",position:[1,3]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1,1]},{type:"for",position:[3,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"attr",position:[3,1,3]},{type:"if",position:[3,1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[3,1]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]}]}},default:{}}],_observedAttributes:["cxPropValue","cxPropFrom","cxPropModule","tags","value","tagsLength","disabledList"],data:function(){return{cxPropValue:Lyte.attr("array"),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropModule:Lyte.attr("string"),tags:Lyte.attr("array"),value:Lyte.attr("array",{default:[]}),tagsLength:Lyte.attr("boolean",{default:!0}),disabledList:Lyte.attr("array",{default:["cruxDisabled"]})}},init:function(){var t=this.getData("cxPropFrom");"criteria"!=t&&"filter"!=t||(this.setData("tags",store.peekAll("tag",{module:this.getData("cxPropModule")})),0==this.getData("tags").length&&this.setData("tagsLength",!1))},methods:{addToList:function(t,e,a){Lyte.arrayUtils(this.getData("value"),"push",this.getData("tags").filterBy({id:e})[0]),this.$node.querySelector("lyte-search").ltProp("placeholder",""),(this.getData("tags").length==JSON.parse(a).length||this.$node.querySelector("lyte-dropdown").component.childComp.querySelectorAll(".lyteDropdownActive").length>1&&this.$node.querySelector("lyte-search").ltProp("value"))&&this.setData("tagsLength",!1)},removeFromList:function(t,e){for(var a=this.getData("value"),o=0;o<a.length;o++)if(a[o].id==e){Lyte.arrayUtils(this.getData("value"),"removeAt",o);break}this.setData("tagsLength",!0)},showNoResult:function(t){0==t.length?this.setData("tagsLength",!1):this.setData("tagsLength",!0)}},getValue:function(){return JSON.stringify(this.getData("value"))},valiate:function(){return!0}}),Lyte.Component.register("crux-text-area-component",{_template:'<template tag-name="crux-text-area-component">\t<pre style="word-wrap : break-word; white-space : pre-wrap; min-width : 200px; max-width : 500px; font-family: \'ProximaNovaRegular\', sans-serif">{{cxPropValue}}</pre></template>',_dynamicNodes:[{type:"text",position:[1,0]}],_observedAttributes:["cxPropValue","cxPropEmptyValue"],data:function(){return{cxPropValue:Lyte.attr("string"),cxPropEmptyValue:Lyte.attr("string",{default:""})}},init:function(){this.getData("cxPropValue")||this.setData("cxPropValue",this.getData("cxPropEmptyValue"))}}),Lyte.Component.register("crux-text-component",{_template:'<template tag-name="crux-text-component">\t<template is="switch" value="{{cxPropFrom}}"><template case="view">{{cxPropValue}}</template><template case="criteria"></template><template case="filter"></template><template case="create">\t\t\t<template is="if" value="{{cxPropYield}}"><template case="true">\t\t\t\t<div class="customLabel">{{cxPropLabel}}</div>\t\t\t\t<div class="customControlothrs pRtop">\t\t\t\t\t<lyte-yield yield-name="yield"></lyte-yield>\t\t\t\t\t<div style="display: inline-block;">\t\t\t\t\t\t<lyte-input lt-prop-class="borderBottom" lt-prop-type="text" lt-prop-value="{{lbind(cxPropValue)}}" lt-prop-maxlength="{{cxPropMaxlength}}" lt-prop-direction="horizontal"> </lyte-input>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t</template><template case="false">\t\t\t\t<lyte-input lt-prop-class="borderBottom" lt-prop-type="text" lt-prop-value="{{lbind(cxPropValue)}}" lt-prop-placeholder="{{cxPropPlaceHolder}}" lt-prop-label="{{cxPropLabel}}" lt-prop-maxlength="{{cxPropMaxlength}}" lt-prop-direction="horizontal"> </lyte-input>\t\t\t</template></template>\t\t</template></template></template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"text",position:[0]}]},criteria:{dynamicNodes:[],additional:{next:"filter"}},filter:{dynamicNodes:[],additional:{next:"create"}},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"insertYield",position:[3,1]},{type:"attr",position:[3,3,1]},{type:"componentDynamic",position:[3,3,1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}],_observedAttributes:["cxPropValue","cxPropFrom","cxPropPlaceHolder","cxPropField","cxPropLabel","cxPropMaxlength","cxPropYield"],data:function(){return{cxPropValue:Lyte.attr("string"),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropPlaceHolder:Lyte.attr("string"),cxPropField:Lyte.attr("object"),cxPropLabel:Lyte.attr("string",{default:""}),cxPropMaxlength:Lyte.attr("number"),cxPropYield:Lyte.attr("boolean",{default:!1})}},validate:function(){var t=this.getData("cxPropValue");return t&&""!=t?!(t.replace(/^\s+/g,"").replace(/\s+$/g,"").indexOf("*")>-1&&(alert(_cruxUtils.getI18n("crm.alert.character.not.allowed"),"*"),this.$node.querySelector("input").focus(),1)):(alert(_cruxUtils.getI18n("crm.field.valid.check",this.getData("cxPropField").field_label)),this.$node.querySelector("input").focus(),!1)},getValue:function(){return this.getData("cxPropValue")}}),Lyte.Component.register("crux-twitter-component",{_template:'<template tag-name="crux-twitter-component">\t<template is="if" value="{{cxPropValue}}"><template case="true">\t\t<a data-zcqa="dummy" class="link" href="{{cruxRebrandProperty(\'TW_URL\')}}/{{cruxEncodeURL(cxPropValue)}}" target="_blank" data-cid="dummy">{{cruxEncodeHTML(cxPropValue)}}</a>\t\t</template></template></template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}],_observedAttributes:["cxPropValue","cxPropTwitterUrl","value","cxPropEmptyValue"],data:function(){return{cxPropValue:Lyte.attr("string"),cxPropTwitterUrl:Lyte.attr("string"),value:Lyte.attr("object"),cxPropEmptyValue:Lyte.attr("string",{default:""})}},init:function(){this.getData("cxPropValue")||this.setData("value",this.setData("cxPropEmptyValue"))}}),Lyte.Component.register("crux-user-component",{_template:'<template tag-name="crux-user-component">\t<template is="switch" value="{{cxPropFrom}}"><template case="view">\t\t\t<span class="lv_data_username ellipsistext vam dIB" onmouseover="{{action(\'showBCard\')}}" onmouseout="{{action(\'hideBCard\')}}">{{name}}</span>\t\t</template><template case="criteria"></template><template case="filter"></template><template case="create">\t\t\t<crux-user-dropdown cx-prop-type="{{if(ifEquals(cxPropFrom,\'create\'),\'single\', \'multiple\')}}" cx-prop-searchable="true" cx-prop-selected-users="{{selectedUsers}}" cx-prop-no-user-label="{{cruxGetI18n(\'crm.label.select.user\')}}"></crux-user-dropdown>\t\t</template></template></template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]},criteria:{dynamicNodes:[],additional:{next:"filter"}},filter:{dynamicNodes:[],additional:{next:"create"}},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}],_observedAttributes:["cxPropValue","cxPropIdSelector","cxPropNameSelector","cxPropFrom","cxPropEmptyValue","selectedUsers"],data:function(){return{cxPropValue:Lyte.attr("object"),cxPropIdSelector:Lyte.attr("string",{default:"id"}),cxPropNameSelector:Lyte.attr("string",{default:"name"}),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropEmptyValue:Lyte.attr("string",{default:""}),selectedUsers:Lyte.attr("array")}},init:function(){if("view"==this.getData("cxPropFrom"))if(this.getData("cxPropValue")){var t=this.getData("cxPropValue");this.setData({id:t[this.getData("cxPropIdSelector")],name:t[this.getData("cxPropNameSelector")]})}else this.setData("cxPropValue",this.getData("cxPropEmptyValueo"))},actions:{showBCard:function(){clearTimeout(this.bcTimeout);var t=this;this.bcTimeout=setTimeout(function(){var e=document.getElementsByTagName("crux-user-tooltip")[0],a=t.getData("cxPropValue")[t.getData("cxPropIdSelector")];t.$node.querySelector("span").classList.add("userHover"),e||(e=Lyte.Component.render("crux-user-tooltip",{},"body")).setMethods({BCardHover:function(){clearTimeout(t.bcTimeout)},BCardOut:function(){t.hideBCard()}}),e.setData({elemId:".userHover",userId:a,contactServerUrl:crmConstants.contactsPhotoURL}),document.getElementById("popoverTooltip").ltProp("show",!0)},500)},hideBCard:function(){this.hideBCard()}},hideBCard:function(){clearTimeout(this.bcTimeout),this.bcTimeout=setTimeout(function(){var t=document.getElementById("popoverTooltip");if(t){t.setData("ltPropShow",!1);var e=document.getElementsByClassName("userHover")[0];if(e&&e.className.indexOf("userHover")>-1){var a=e.className.split(" ");a.splice(a.indexOf("userHover"),1),e.className=a.join(" ")}}},500)},getValue:function(){for(var t=this.$node.querySelector("crux-user-dropdown").cxProp("selectedUsers"),e=[],a=0;a<t.length;a++)e.push(t[a].id);return e},valueObserver:function(){var t=this;"criteria"!=this.getData("cxPropFrom")&&"filter"!=this.getData("cxPropFrom")||store.findAll("user",this.getData("cxPropValue")).then(function(e){t.setData("selectedUsers",e)})}.observes("cxPropValue")}),Lyte.Component.register("crux-user-tooltip",{_template:'<template tag-name="crux-user-tooltip"><lyte-popover lt-prop-origin-elem="{{elemId}}" id="popoverTooltip" lt-prop-show-close-button="false" lt-prop-freeze="false" lt-prop-scrollable="false" class="userTooltipPopoverClass" lt-prop-wrapper-class="infoPopover" lt-prop-type="{{if(isBusinessCard, \'box\', \'\')}}" on-show="{{method(\'showPopover\')}}" lt-prop-duration="0">\t<template is="registerYield" yield-name="popover">\t\t<lyte-popover-content class="{{if(isBusinessCard, \'userbcpopup\', \'\')}}" onmouseover="{{action(\'mouseOver\')}}" onmouseout="{{action(\'mouseOut\')}}">\t\t<template is="if" value="{{expHandlers(isBusinessCard,\'!\')}}"><template case="true">\t\t    <div class="mB8">\t\t        <img class="dIB vat lvttImg mR5" src="{{contactServerUrl}}/file?ID={{userData.zuid}}&amp;fs=thumb">\t\t        <div class="dIB vat">\t\t            <span class="bold color_1 dB mB3">{{userData.full_name}}</span>\t\t            <template is="if" value="{{isClientPortalUser}}"><template case="true">\t\t            \t<span class="color_9 f13">{{cruxGetI18n(\'custmr.prtl.user.role\')}}, {{userData.profile.name}}</span>\t\t            </template><template case="false">\t\t            \t<span class="color_9 f13">{{userData.role.name}}, {{userData.profile.name}}</span>\t\t            </template></template>\t\t        </div>\t\t    </div>\t\t    <div class="mB5"><span class="dIB vam lvttMailIcon mR10"></span><span class="dIB color_6 f13">{{userData.email}}</span></div>\t\t    <div><span class="dIB vam lvttPhoneIcon mR10"></span><span class="dIB color_6 f13">{{userData.phone}}</span></div>\t\t</template><template case="false">\t\t\t\t<div class="pR">\t\t\t\t\t<div class="up_space pA">\t\t\t\t\t\t<img class="up_size fL" src="{{contactServerUrl}}/file?ID={{userData.zuid}}&amp;fs=thumb">\t\t\t\t\t</div>\t\t\t\t\t<div class="userbc_info">\t\t\t\t\t\t<div class="proximas f15 pT5 pB5 userinfoMax" onclick="window.open(&quot;{{concat(&quot;/crm/settings/users/&quot;, userId)}}&quot;,&quot;_blank&quot;);">\t\t\t\t\t\t\t{{userData.full_name}}\t\t\t\t\t\t\t<span class="mL5 proxima normaltag">{{userData.profile.name}}</span>\t\t\t\t\t\t</div>\t\t\t\t\t\t<a class="emailicon lh24 black dB" href="mailto:{{{email}}}">{{userData.email}}</a>\t\t\t\t\t\t<div class="phoneicon lh24">{{userData.phone}}</div>\t\t\t\t\t\t<div class="mobileicon lh24">{{userData.mobile}}</div>\t\t\t\t\t</div>\t\t\t\t\t<div id="actionLayer" class="aligncenter">\t\t\t\t\t\t<template is="if" value="{{showChatIcon}}"><template case="true">\t\t\t\t\t\t<button id="chatBtn" type="button" class="dismiss-btn" onclick="WMSUI.chat(&quot;{{userData.zuid}}&quot;,this);">Chat</button>\t\t\t\t\t\t\t\t\t\t\t\t</template></template>\t\t\t\t\t</div>\t\t\t\t</div>\t\t    </template></template>\t\t</lyte-popover-content>\t</template></lyte-popover></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"registerYield",position:[0,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,3,1,0]},{type:"attr",position:[1,3,3]},{type:"if",position:[1,3,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[1,2]}]},false:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[1,2]}]}},default:{}},{type:"text",position:[3,1,0]},{type:"text",position:[5,1,0]}]},false:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"attr",position:[1,3,1]},{type:"text",position:[1,3,1,1]},{type:"text",position:[1,3,1,3,0]},{type:"attr",position:[1,3,3]},{type:"text",position:[1,3,3,0]},{type:"text",position:[1,3,5,0]},{type:"text",position:[1,3,7,0]},{type:"attr",position:[1,5,1]},{type:"if",position:[1,5,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[0]}],_observedAttributes:["elemId","userId","userData","contactServerUrl","isBusinessCard","showChatIcon"],data:function(){return{elemId:Lyte.attr("string"),userId:Lyte.attr("string"),userData:Lyte.attr("object"),contactServerUrl:Lyte.attr("string"),isBusinessCard:Lyte.attr("boolean"),showChatIcon:Lyte.attr("boolean",{default:!0})}},methods:{showPopover:function(){var t=this,e=store.peekRecord("user",this.getData("userId"));e?this.displayPopup(e):store.findRecord("user",this.getData("userId")).then(function(e){t.displayPopup(e)})}},actions:{mouseOver:function(){this.getMethods("BCardHover")&&this.executeMethod("BCardHover")},mouseOut:function(){this.getMethods("BCardOut")&&this.executeMethod("BCardOut")}},displayPopup:function(t){this.setData("userData",t);var e=document.querySelector(".infoPopover").querySelector(".lytePopover"),a=document.querySelector(this.getData("elemId"));if(this.getData("isBusinessCard"))e.classList.remove("lvOwnerTooltipLeft","lvOwnerTooltipRight"),a&&(a.getBoundingClientRect().x+e.offsetWidth>=window.innerWidth?e.style.left=a.getBoundingClientRect().left-(a.getBoundingClientRect().x+e.offsetWidth-window.innerWidth)+"px":e.style.left=a.getBoundingClientRect().left+"px",e.style.top=a.getBoundingClientRect().top+22+"px");else{if(a){var o=a.getBoundingClientRect(),i=a.offsetWidth;e.style.padding="0px",e.querySelector("lyte-popover-content").style.padding="15px 20px";var r=e.offsetWidth+23;(e.classList.contains("lvOwnerTooltip")||e.classList.contains("lvOwnerTooltipLeft")||e.classList.contains("lvOwnerTooltipRight"))&&(r=e.offsetWidth),o.x+i+r>=window.innerWidth?(e.classList.remove("lvOwnerTooltipRight","lvOwnerTooltip"),e.classList.add("lvOwnerTooltipLeft","lvOwnerTooltip"),e.style.left=o.x-(r+8)+"px",e.style.top=o.top-30+"px"):(e.classList.remove("lvOwnerTooltipLeft","lvOwnerTooltip"),e.classList.add("lvOwnerTooltipRight","lvOwnerTooltip"),e.style.left=o.x+i+8+"px",e.style.top=o.top-30+"px")}(this.getData("userId")==Crm.userDetails.USER_ID||!WmsContacts.contactslist[t.zuid]||WmsContacts.contactslist[t.zuid]&&-1==WmsContacts.contactslist[t.zuid].STATUS)&&this.setData("showChatIcon",!1)}}}),Lyte.Component.register("crux-website-component",{_template:'<template tag-name="crux-website-component">\t<template is="switch" value="{{cxPropFrom}}"><template case="view"><template is="if" value="{{cxPropValue}}"><template case="true"><a class="link" href="{{href}}" target="_blank">{{cxPropValue}}</a></template></template></template><template case="create">\t\t\t<lyte-input lt-prop-class="borderBottom" lt-prop-type="text" lt-prop-value="{{lbind(cxPropValue)}}" lt-prop-label="{{cxPropLabel}}" lt-prop-maxlength="{{cxPropMaxlength}}" lt-prop-direction="horizontal"> </lyte-input>\t\t</template></template></template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"text",position:[0,0]}]}},default:{}}]},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}],_observedAttributes:["cxPropValue","cxPropEmptyValue","cxPropFrom","cxPropLabel","cxPropMaximumLength"],data:function(){return{cxPropValue:Lyte.attr("string"),cxPropEmptyValue:Lyte.attr("string",{default:""}),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropLabel:Lyte.attr("string"),cxPropMaximumLength:Lyte.attr("number")}},init:function(){var t=this.getData("cxPropValue");t&&""!==t&&0!=t.indexOf("http")&&0!=t.indexOf("https")&&this.setData("href","http://"+t),t||this.setData("cxPropValue",this.getData("cxPropEmptyValue"))}});