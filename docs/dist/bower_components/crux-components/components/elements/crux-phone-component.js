Lyte.Component.register("crux-phone-component",{_template:'<template tag-name="crux-phone-component">\t<template is="if" value="{{cxPropValue}}"><template case="true">\t\t<template is="if" value="{{expHandlers(expHandlers(cxPropCallAllowed,\'==\',false),\'||\',cxPropField.private.restricted)}}"><template case="true">\t\t\t<div onmouseover="{{action(\'onMouseOver\')}}" onmouseout="{{action(\'onMouseOut\')}}" class="phoneRtl" style="min-width : 100%;">\t\t\t\t<zpb-phone phoneno="{{cxPropValue}}" callbackparam="{&quot;module&quot;:&quot;{{module}}&quot;, &quot;searchid&quot;:&quot;{{entityId}}&quot;}">{{cxPropDisplayValue}}</zpb-phone>\t\t\t</div>\t\t</template><template case="false"><template is="if" value="{{outbound}}"><template case="true">\t\t\t<div class="phoneRtl" style="min-width:100%">{{cxPropDisplayValue}}<a href="javascript;" class="calliconOuter fN" onclick="{{action(\'onClick\')}}"><i class="callIcon"></i><span id="calllabel1">{{cruxGetI18n(\'Call\')}}</span></a></div>\t\t\t\t</template><template case="false">\t\t\t<div onmouseover="{{action(\'onMouseOver\')}}" onmouseout="{{action(\'onMouseOut\')}}" class="phoneRtl" style="min-width : 100%;">\t\t\t\t<zpb-phone phoneno="{{cxPropValue}}" callbackparam="{&quot;module&quot;:&quot;{{module}}&quot;, &quot;searchid&quot;:&quot;{{entityId}}&quot;}">{{cxPropDisplayValue}}</zpb-phone>\t\t\t\t<a style="visibility : hidden;" class="pH2 phoneRtl" title="{{cruxGetI18n(\'crm.phoneNo.Link.Title\')}}" href="skype:{{cxPropValue}}?call" onclick="sE();"></a>\t\t\t</div>\t\t\t\t</template></template></template></template>\t</template></template></template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"attr",position:[1,2]},{type:"text",position:[1,2,1,0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["cxPropValue","cxPropFrom","cxPropDisplayValue","outbound","cxPropField","cxPropCallAllowed","cxPropEmptyValue"],data:function(){return{cxPropValue:Lyte.attr("string"),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropDisplayValue:Lyte.attr("string"),outbound:Lyte.attr("boolean",{default:!1}),cxPropField:Lyte.attr("object"),cxPropCallAllowed:Lyte.attr("boolean"),cxPropEmptyValue:Lyte.attr("string",{default:""})}},actions:{onMouseOver:function(){var t=this.$node;t.querySelector("a")&&(t.querySelector("a").style.visibility="visible")},onMouseOut:function(){var t=this.$node;t.querySelector("a")&&(t.querySelector("a").style.visibility="hidden")},onClick:function(){event.preventDefault(),this.throwEvent("onPhoneClick",event.target,this.getData("cxPropValue"))}},init:function(){var t=this.getData("cxPropValue");if("view"==this.getData("cxPropFrom"))if(t){var e=t;e.match(/[0-9]/)&&(e="(",10==t.length?e+=t.substring(0,3)+") "+t.substring(3,6)+"-"+t.substring(6,10):9==t.length?e+=t.substring(0,5)+")-"+t.substring(5,9):e=t),this.setData("cxPropDisplayValue",e),this.setData("outbound",Crm.userDetails.TELEPHONY_ENABLED)}else this.setData("cxPropDisplayValue",this.getData("cxPropEmptyValue"))}});