Lyte.Component.register("crux-user-component",{_template:'<template tag-name="crux-user-component">\t<template is="switch" value="{{cxPropFrom}}"><template case="view">\t\t\t<span class="lv_data_username ellipsistext vam dIB" onmouseover="{{action(\'showBCard\')}}" onmouseout="{{action(\'hideBCard\')}}">{{name}}</span>\t\t</template><template case="criteria"></template><template case="filter">\t\t\t<crux-user-dropdown cx-prop-type="multiple" cx-prop-searchable="true" cx-prop-selected-users="{{cxPropValue}}" cx-prop-user-yield="true">\t\t\t</crux-user-dropdown>\t\t</template></template></template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]},criteria:{dynamicNodes:[],additional:{next:"filter"}},filter:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}],_observedAttributes:["cxPropValue","cxPropIdSelector","cxPropNameSelector","cxPropFrom","cxPropEmptyValue"],data:function(){return{cxPropValue:Lyte.attr("string"),cxPropIdSelector:Lyte.attr("string",{default:"id"}),cxPropNameSelector:Lyte.attr("string",{default:"name"}),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropEmptyValue:Lyte.attr("string",{default:""})}},init:function(){if("view"==this.getData("cxPropFrom"))if(this.getData("cxPropValue")){var t=JSON.parse(this.getData("cxPropValue"));this.setData({id:t[this.getData("cxPropIdSelector")],name:t[this.getData("cxPropNameSelector")]})}else this.setData("cxPropValue",this.getData("cxPropEmptyValueo"))},actions:{showBCard:function(){var t=document.getElementsByTagName("crux-user-tooltip")[0],e=JSON.parse(this.getData("cxPropValue"))[this.getData("cxPropIdSelector")];if(this.$node.querySelector("span").classList.add("userHover"),!t){var o=this;(t=Lyte.Component.render("crux-user-tooltip",{},"body")).setMethods({BCardHover:function(){clearTimeout(o.bcTimeout)},BCardOut:function(){o.hideBCard()}})}t.setData({elemId:".userHover",userId:e,contactServerUrl:crmConstants.contactsPhotoURL}),clearTimeout(this.bcTimeout),document.getElementById("popoverTooltip").ltProp("show",!0)},hideBCard:function(){this.hideBCard()}},hideBCard:function(){clearTimeout(this.bcTimeout),this.bcTimeout=setTimeout(function(){document.getElementById("popoverTooltip").setData("ltPropShow",!1);var t=document.getElementsByClassName("userHover")[0];if(t&&t.className.indexOf("userHover")>-1){var e=t.className.split(" ");e.splice(e.indexOf("userHover"),1),t.className=e.join(" ")}},500)}});